/* Generated by Nim Compiler v0.11.2 */
/*   (c) 2015 Andreas Rumpf */
/* The generated code is subject to the original license. */
/* Compiled for: Windows, amd64, gcc */
/* Command for C compiler:
   C:\Nim\dist\mingw\bin\gcc.exe -c  -w  -IC:\Nim\lib -o c:\users\owner\documents\nim\esfj\nimcache\nimbus.o c:\users\owner\documents\nim\esfj\nimcache\nimbus.c */
#define NIM_INTBITS 64
#include "nimbase.h"

#include <string.h>

#include <setjmp.h>

#include <stdio.h>
typedef struct TY13606 TY13606;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct Tcell46746 Tcell46746;
typedef struct Tcellseq46762 Tcellseq46762;
typedef struct Tgcheap48616 Tgcheap48616;
typedef struct Tcellset46758 Tcellset46758;
typedef struct Tpagedesc46754 Tpagedesc46754;
typedef struct Tmemregion28610 Tmemregion28610;
typedef struct Tsmallchunk27840 Tsmallchunk27840;
typedef struct Tllchunk28604 Tllchunk28604;
typedef struct Tbigchunk27842 Tbigchunk27842;
typedef struct Tintset27817 Tintset27817;
typedef struct Ttrunk27813 Ttrunk27813;
typedef struct Tavlnode28608 Tavlnode28608;
typedef struct Tgcstat48614 Tgcstat48614;
typedef struct Slice88061 Slice88061;
typedef struct Tsocketimpl136607 Tsocketimpl136607;
typedef struct Tsqlite3165291 Tsqlite3165291;
typedef struct Exception Exception;
typedef struct TNimObject TNimObject;
typedef struct TSafePoint TSafePoint;
typedef struct Mtstate273035 Mtstate273035;
typedef struct TY167494 TY167494;
typedef struct TY164210 TY164210;
typedef struct SslcontextHEX3Aobjecttype265375 SslcontextHEX3Aobjecttype265375;
typedef struct ProxyHEX3Aobjecttype265023 ProxyHEX3Aobjecttype265023;
typedef struct Tbasechunk27838 Tbasechunk27838;
typedef struct Tfreecell27830 Tfreecell27830;
typedef struct Uri235012 Uri235012;
struct  TGenericSeq  {
NI len;
NI reserved;
};
struct  NimStringDesc  {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
typedef N_NIMCALL_PTR(void, TY3289) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, TY3294) (void* p);
struct  TNimType  {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
TY3289 marker;
TY3294 deepcopy;
};
struct  TNimNode  {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct  Tcell46746  {
NI refcount;
TNimType* typ;
};
struct  Tcellseq46762  {
NI len;
NI cap;
Tcell46746** d;
};
struct  Tcellset46758  {
NI counter;
NI max;
Tpagedesc46754* head;
Tpagedesc46754** data;
};
typedef Tsmallchunk27840* TY28622[512];
typedef Ttrunk27813* Ttrunkbuckets27815[256];
struct  Tintset27817  {
Ttrunkbuckets27815 data;
};
struct  Tmemregion28610  {
NI minlargeobj;
NI maxlargeobj;
TY28622 freesmallchunks;
Tllchunk28604* llmem;
NI currmem;
NI maxmem;
NI freemem;
NI lastsize;
Tbigchunk27842* freechunkslist;
Tintset27817 chunkstarts;
Tavlnode28608* root;
Tavlnode28608* deleted;
Tavlnode28608* last;
Tavlnode28608* freeavlnodes;
};
struct  Tgcstat48614  {
NI stackscans;
NI cyclecollections;
NI maxthreshold;
NI maxstacksize;
NI maxstackcells;
NI cycletablesize;
NI64 maxpause;
};
struct  Tgcheap48616  {
void* stackbottom;
NI cyclethreshold;
Tcellseq46762 zct;
Tcellseq46762 decstack;
Tcellset46758 cycleroots;
Tcellseq46762 tempstack;
NI recgclock;
Tmemregion28610 region;
Tgcstat48614 stat;
};
struct  Slice88061  {
NI a;
NI b;
};
typedef NimStringDesc* TY161637[1];
struct  TNimObject  {
TNimType* m_type;
};
struct  Exception  {
  TNimObject Sup;
Exception* parent;
NCSTRING name;
NimStringDesc* message;
NimStringDesc* trace;
};
typedef struct {
N_NIMCALL_PTR(NIM_BOOL, ClPrc) (Exception* e, void* ClEnv);
void* ClEnv;
} TY15609;
struct  TSafePoint  {
TSafePoint* prev;
NI status;
jmp_buf context;
NIM_BOOL hasRaiseAction;
TY15609 raiseAction;
};
typedef NimStringDesc* TY167666[1];
typedef NimStringDesc* TY282228[2];
typedef NU32 TY273036[624];
struct  Mtstate273035  {
TY273036 mt;
NI mti;
};
struct TY164210 {
NimStringDesc* Field0;
NI Field1;
};
typedef NU8 TY77659[32];
typedef NI TY27820[8];
struct  Tpagedesc46754  {
Tpagedesc46754* next;
NI key;
TY27820 bits;
};
struct  Tbasechunk27838  {
NI prevsize;
NI size;
NIM_BOOL used;
};
struct  Tsmallchunk27840  {
  Tbasechunk27838 Sup;
Tsmallchunk27840* next;
Tsmallchunk27840* prev;
Tfreecell27830* freelist;
NI free;
NI acc;
NF data;
};
struct  Tllchunk28604  {
NI size;
NI acc;
Tllchunk28604* next;
};
struct  Tbigchunk27842  {
  Tbasechunk27838 Sup;
Tbigchunk27842* next;
Tbigchunk27842* prev;
NI align;
NF data;
};
struct  Ttrunk27813  {
Ttrunk27813* next;
NI key;
TY27820 bits;
};
typedef Tavlnode28608* TY28614[2];
struct  Tavlnode28608  {
TY28614 link;
NI key;
NI upperbound;
NI level;
};
typedef NIM_CHAR TY256208[4001];
struct  Tsocketimpl136607  {
NI fd;
NIM_BOOL isbuffered;
union{
struct {TY256208 buffer;
NI currpos;
NI buflen;
} S1;
} isbufferedU;
NIM_BOOL nonblocking;
};
struct  Tsqlite3165291  {
char dummy;
};
struct  SslcontextHEX3Aobjecttype265375  {
char dummy;
};
struct  Uri235012  {
NimStringDesc* scheme;
NimStringDesc* username;
NimStringDesc* password;
NimStringDesc* hostname;
NimStringDesc* port;
NimStringDesc* path;
NimStringDesc* query;
NimStringDesc* anchor;
NIM_BOOL opaque;
};
struct  ProxyHEX3Aobjecttype265023  {
Uri235012 url;
NimStringDesc* auth;
};
struct  Tfreecell27830  {
Tfreecell27830* next;
NI zerofield;
};
struct TY13606 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY167494 {
  TGenericSeq Sup;
  TY13606* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, delete_282273)(TY13606** s, NI first, NI last);
N_NIMCALL(NimStringDesc*, version_282001)(void);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src);
static N_INLINE(void, nimFrame)(TFrame* s);
N_NOINLINE(void, stackoverflow_20001)(void);
static N_INLINE(void, popFrame)(void);
N_NIMCALL(NimStringDesc*, about_282007)(void);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
N_NIMCALL(TY13606*, chansplit_282013)(NimStringDesc* raw);
N_NIMCALL(void*, newSeq)(TNimType* typ, NI len);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI start_76643, NI last);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI first, NI last);
static N_INLINE(NI, addInt)(NI a, NI b);
N_NOINLINE(void, raiseOverflow)(void);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b);
static N_INLINE(NI, subInt)(NI a, NI b);
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* seq, NI elemsize);
N_NIMCALL(NimStringDesc*, copyStringRC1)(NimStringDesc* src);
static N_INLINE(void, nimGCunrefNoCycle)(void* p);
static N_INLINE(Tcell46746*, usrtocell_50246)(void* usr);
static N_INLINE(void, rtladdzct_51804)(Tcell46746* c);
N_NOINLINE(void, addzct_50217)(Tcellseq46762* s, Tcell46746* c);
N_NIMCALL(NimStringDesc*, getnick_282070)(NimStringDesc* raw);
static N_INLINE(NimStringDesc*, HEX5BHEX5D_88054)(NimStringDesc* s, Slice88061 x);
static N_INLINE(Slice88061, HEX2EHEX2E_110273)(NI a, NI b);
N_NIMCALL(NI, nsuFindChar)(NimStringDesc* s, NIM_CHAR sub, NI start);
N_NIMCALL(void, genericSeqAssign)(void* dest, void* src_83404, TNimType* mt);
N_NIMCALL(Tsocketimpl136607*, socket_137604)(NU8 domain, NU8 typ, NU8 protocol, NIM_BOOL buffered);
static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src);
N_NIMCALL(Tsqlite3165291*, open_167645)(NimStringDesc* connection, NimStringDesc* user, NimStringDesc* password, NimStringDesc* database);
N_NIMCALL(void, exec_167155)(Tsqlite3165291* db, NimStringDesc* query, NimStringDesc** args, NI argsLen0);
static N_INLINE(NimStringDesc*, sql_167021)(NimStringDesc* query);
N_NIMCALL(void, connect_142083)(Tsocketimpl136607* socket, NimStringDesc* address, NU16 port, NU8 af);
N_NIMCALL(void, send_146407)(Tsocketimpl136607* socket, NimStringDesc* data);
N_NIMCALL(NimStringDesc*, inttoitem_282137)(NI itemid);
N_NIMCALL(NIM_BOOL, isloggedin_282144)(NimStringDesc* name);
N_NIMCALL(NI, nsuCmpIgnoreCase)(NimStringDesc* a, NimStringDesc* b);
N_NOINLINE(void, raiseIndexError)(void);
N_NIMCALL(NIM_BOOL, checkuser_282181)(NimStringDesc* name);
static N_INLINE(void, pushSafePoint)(TSafePoint* s);
N_NIMCALL(NimStringDesc*, getvalue_167577)(Tsqlite3165291* db, NimStringDesc* query, NimStringDesc** args, NI argsLen0);
N_NIMCALL(NimStringDesc*, nsuToUpperStr)(NimStringDesc* s);
N_NIMCALL(NI, nsuParseInt)(NimStringDesc* s);
static N_INLINE(void, popSafePoint)(void);
static N_INLINE(void, setFrame)(TFrame* s);
static N_INLINE(void, popCurrentException)(void);
static N_INLINE(void, asgnRef)(void** dest, void* src);
static N_INLINE(void, incref_52622)(Tcell46746* c);
static N_INLINE(NIM_BOOL, canbecycleroot_50267)(Tcell46746* c);
static N_INLINE(void, rtladdcycleroot_51023)(Tcell46746* c);
N_NOINLINE(void, incl_47465)(Tcellset46758* s, Tcell46746* cell);
static N_INLINE(void, decref_52204)(Tcell46746* c);
N_NIMCALL(void, reraiseException)(void);
N_NIMCALL(NIM_BOOL, checkblacklist_282192)(NimStringDesc* name);
N_NIMCALL(NimStringDesc*, getquote_282203)(NI id);
N_NIMCALL(TY13606*, getrow_167472)(Tsqlite3165291* db, NimStringDesc* query, NimStringDesc** args, NI argsLen0);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI x);
N_NIMCALL(NI, addquote_282213)(NimStringDesc* content);
N_NIMCALL(NI64, tryinsertid_167593)(Tsqlite3165291* db, NimStringDesc* query, NimStringDesc** args, NI argsLen0);
N_NIMCALL(NI, adduser_282223)(NimStringDesc* name, NimStringDesc* pass);
N_NIMCALL(NI, getquotecount_282234)(void);
N_NIMCALL(NIM_BOOL, loginuser_282244)(NimStringDesc* name, NimStringDesc* pass);
N_NIMCALL(NIM_BOOL, logoutuser_282255)(NimStringDesc* name);
N_NIMCALL(NI, upvote_282363)(NimStringDesc* name);
N_NIMCALL(NI, downvote_282375)(NimStringDesc* name);
N_NIMCALL(NI, karma_282387)(NimStringDesc* name);
N_NIMCALL(NI, userid_282396)(NimStringDesc* name);
N_NIMCALL(NI, getweapon_282422)(NimStringDesc* user);
N_NIMCALL(NI, getarmor_282431)(NimStringDesc* user);
N_NIMCALL(NI, getshield_282440)(NimStringDesc* user);
N_NIMCALL(NimStringDesc*, getbag_282449)(NimStringDesc* user);
N_NIMCALL(NIM_BOOL, hasitem_282458)(NI item, NimStringDesc* user);
N_NIMCALL(NIM_BOOL, tryexec_167138)(Tsqlite3165291* db, NimStringDesc* query, NimStringDesc** args, NI argsLen0);
N_NIMCALL(NIM_BOOL, removeitem_282468)(NI item, NimStringDesc* user);
N_NIMCALL(NimStringDesc*, nsuReplaceStr)(NimStringDesc* s, NimStringDesc* sub, NimStringDesc* by);
N_NIMCALL(NI, itemid_282480)(NimStringDesc* item);
N_NIMCALL(NIM_BOOL, isweapon_282489)(NI item);
N_NIMCALL(void, setweapon_282498)(NI item, NimStringDesc* user);
N_NIMCALL(void, setarmor_282507)(NI item, NimStringDesc* user);
N_NIMCALL(void, equipitem_282516)(NI item, NimStringDesc* user);
N_NIMCALL(NI, getitembonus_282523)(NI item);
N_NIMCALL(NimStringDesc*, getitemname_282532)(NI item);
N_NIMCALL(NI, getdefensebonus_282541)(NimStringDesc* user);
N_NIMCALL(NI, getattackbonus_282548)(NimStringDesc* user);
N_NIMCALL(NimStringDesc*, battleusers_282555)(NimStringDesc* user1, NimStringDesc* user2);
static N_INLINE(NI, randomint_279271)(NI min, NI max);
static N_INLINE(NI, randomint_279309)(Mtstate273035* rng, NI min, NI max);
static N_INLINE(NI, randomint_277853)(Mtstate273035* rng, NI max);
N_NIMCALL(NU, randomintimpl_277871)(Mtstate273035* rng, NU max);
static N_INLINE(NI, chckRange)(NI i, NI a, NI b);
N_NOINLINE(void, raiseRangeError)(NI64 val);
N_NIMCALL(NIM_BOOL, doesusergetdrop_282673)(NimStringDesc* msg, NimStringDesc* user);
N_NIMCALL(NI, generatelootdrop_282706)(NimStringDesc* user, NIM_BOOL rare);
N_NIMCALL(TY167494*, getallrows_167488)(Tsqlite3165291* db, NimStringDesc* query, NimStringDesc** args, NI argsLen0);
N_NIMCALL(NIM_BOOL, adduserloot_282768)(NI user, NI item);
static N_INLINE(void, writeln_282786)(FILE* f, NimStringDesc** x, NI xLen0);
N_NIMCALL(void, write_13457)(FILE* f, NimStringDesc* s);
N_NIMCALL(void, readline_145045)(Tsocketimpl136607* socket, NimStringDesc** line, NI timeout);
N_NIMCALL(void, failedassertimpl_88817)(NimStringDesc* msg);
N_NIMCALL(NimStringDesc*, HEX24_282880)(TY13606* x);
N_NIMCALL(NimStringDesc*, collectiontostring_282888)(TY13606* x, NimStringDesc* b, NimStringDesc* e);
N_NIMCALL(TY13606*, nsuSplitString)(NimStringDesc* s, NimStringDesc* sep);
N_NIMCALL(NimStringDesc*, nsuToLowerStr)(NimStringDesc* s);
N_NIMCALL(FILE*, open_13217)(NimStringDesc* filename, NU8 mode, NI bufsize);
N_NIMCALL(NimStringDesc*, nsuJoinSep)(NimStringDesc** a, NI aLen0, NimStringDesc* sep);
N_NIMCALL(TY13606*, HEX5BHEX5D_133598)(TY13606* s, Slice88061 x);
N_NIMCALL(void, execcmdex_164204)(NimStringDesc* command, NU8 options, TY164210* Result);
N_NOINLINE(void, chckNil)(void* p);
N_NIMCALL(TY13606*, nsuSplitCharSet)(NimStringDesc* s, TY77659 seps);
N_NIMCALL(NimStringDesc*, nimBoolToStr)(NIM_BOOL x);
N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringDesc* s, NimStringDesc* prefix);
N_NIMCALL(void, nsuDelete)(NimStringDesc** s, NI first, NI last);
N_NIMCALL(NimStringDesc*, getcontent_266171)(NimStringDesc* url, NimStringDesc* extraheaders, NI maxredirects, SslcontextHEX3Aobjecttype265375* sslcontext, NI timeout, NimStringDesc* useragent, ProxyHEX3Aobjecttype265023* proxy);
N_NIMCALL(NIM_BOOL, contains_101362)(NimStringDesc* s, NimStringDesc* sub);
N_NIMCALL(void, close_140462)(Tsocketimpl136607* socket);
static N_INLINE(void, initStackBottomWith)(void* locals);
N_NOINLINE(void, setStackBottom)(void* thestackbottom);
NIM_EXTERNC N_NOINLINE(void, systemInit)(void);
NIM_EXTERNC N_NOINLINE(void, systemDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_parseutilsInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_parseutilsDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_strutilsInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_strutilsDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_winleanInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_winleanDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_timesInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_timesDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_osInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_osDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_parseopt2Init)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_parseopt2DatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_unsignedInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_unsignedDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_socketsInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_socketsDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_hashesInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_hashesDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_strtabsInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_strtabsDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_streamsInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_streamsDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_cpuinfoInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_cpuinfoDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_osprocInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_osprocDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_sqlite3Init)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_sqlite3DatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_db_sqliteInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_db_sqliteDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_lexbaseInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_lexbaseDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_unicodeInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_unicodeDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_macrosInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_macrosDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_jsonInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_jsonDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_typeinfoInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_typeinfoDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_mathInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_mathDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_intsetsInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_intsetsDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_tablesInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_tablesDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_marshalInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_marshalDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_parsexmlInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_parsexmlDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_rawsocketsInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_rawsocketsDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_netInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_netDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_uriInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_uriDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_base64Init)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_base64DatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_mimetypesInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_mimetypesDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_endiansInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_endiansDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_oidsInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_oidsDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_setsInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_setsDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_asyncdispatchInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_asyncdispatchDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_asyncnetInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_asyncnetDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_httpclientInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_httpclientDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_utilInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_utilDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_random_realInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_random_realDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_commonInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_commonDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_mt19937arInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_mt19937arDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_mersenneInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_mersenneDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_urandomInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_urandomDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_randomInit)(void);
NIM_EXTERNC N_NOINLINE(void, random_randomDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_sequtilsInit)(void);
NIM_EXTERNC N_NOINLINE(void, stdlib_sequtilsDatInit)(void);
NIM_EXTERNC N_NOINLINE(void, nimbusInit)(void);
NIM_EXTERNC N_NOINLINE(void, nimbusDatInit)(void);
STRING_LITERAL(TMP2750, "v1.0.0", 6);
STRING_LITERAL(TMP2751, "ESFJ - By Cryptotoad (", 22);
STRING_LITERAL(TMP2752, ")", 1);
STRING_LITERAL(TMP2754, ",", 1);
STRING_LITERAL(TMP2757, "#", 1);
STRING_LITERAL(TMP2760, "irc.freenode.net", 16);
STRING_LITERAL(TMP2762, "", 0);
NIM_CONST struct {
  TGenericSeq Sup;
  NimStringDesc* data[1];
} CNSTSEQ2764 = {{1, 1}, {((NimStringDesc*) &TMP2762)}};
NIM_CONST TY13606* TMP2761 = ((TY13606*)&CNSTSEQ2764);
STRING_LITERAL(TMP2764, "FoxMcCloud", 10);
STRING_LITERAL(TMP2765, "ESFJ", 4);
STRING_LITERAL(TMP2767, "#reddit-intp", 12);
NIM_CONST struct {
  TGenericSeq Sup;
  NimStringDesc* data[1];
} CNSTSEQ2769 = {{1, 1}, {((NimStringDesc*) &TMP2767)}};
NIM_CONST TY13606* TMP2766 = ((TY13606*)&CNSTSEQ2769);
STRING_LITERAL(TMP2773, "ESFJ.db", 7);
STRING_LITERAL(TMP2774, "postgres", 8);
STRING_LITERAL(TMP2775, "nimforum", 8);
STRING_LITERAL(TMP2776, "create table if not exists quotes(\015\012  id integer primary key,\015\012"
"  content varchar(1024) not null);\015\012", 99);
STRING_LITERAL(TMP2777, "create table if not exists users(\015\012  id integer primary key,\015\012 "
" name varchar(20) not null,\015\012  upvotes integer not null,\015\012  down"
"votes integer not null,\015\012  rank integer not null,\015\012  pass varcha"
"r(30) not null,\015\012  loot varchar(300));\015\012", 231);
STRING_LITERAL(TMP2778, "create table if not exists users_loot(\015\012  id integer primary ke"
"y, \015\012  weapon integer, \015\012  armor integer, \015\012  shield integer, \015\012"
"  bag varchar(1024))", 147);
STRING_LITERAL(TMP2781, "NICK ", 5);
STRING_LITERAL(TMP2782, "\015\015\012", 3);
STRING_LITERAL(TMP2783, "USER ", 5);
STRING_LITERAL(TMP2784, " ", 1);
STRING_LITERAL(TMP2785, " :ESFJ IRC\015\015\012", 13);
STRING_LITERAL(TMP2786, "MODE ", 5);
STRING_LITERAL(TMP2787, " +i\015\015\012", 6);
STRING_LITERAL(TMP2788, "flaming", 7);
STRING_LITERAL(TMP2789, "none", 4);
STRING_LITERAL(TMP2792, "select id from users where upper(name) = ?", 42);
STRING_LITERAL(TMP2794, "select id from blacklist where upper(name) = ?", 46);
STRING_LITERAL(TMP2795, "select id, content from quotes where id = ?", 43);
STRING_LITERAL(TMP2796, "Quote #", 7);
STRING_LITERAL(TMP2797, " : ", 3);
STRING_LITERAL(TMP2798, "insert into quotes(id, content) values (null, ?)", 48);
STRING_LITERAL(TMP2799, "insert into users(id, name, upvotes, downvotes, rank, pass, loo"
"t) values (null, ?, 0, 0, 0, ?, \'\')", 98);
STRING_LITERAL(TMP2800, "select count(*) from quotes", 27);
STRING_LITERAL(TMP2802, "select id from users where upper(name) = ? and pass = ?", 55);
STRING_LITERAL(TMP2804, "  update users set upvotes = upvotes + 1 where upper(name) = ?;"
"\015\012  ", 67);
STRING_LITERAL(TMP2805, "select upvotes - downvotes from users where upper(name) = ?", 59);
STRING_LITERAL(TMP2806, "  update users set downvotes = downvotes + 1 where upper(name) "
"= ?;\015\012  ", 71);
STRING_LITERAL(TMP2809, "select weapon from users_loot where id = ?", 42);
STRING_LITERAL(TMP2810, "select armor from users_loot where id = ?", 41);
STRING_LITERAL(TMP2811, "select shield from users_loot where id = ?", 42);
STRING_LITERAL(TMP2812, "select bag from users_loot where id = ?", 39);
STRING_LITERAL(TMP2813, "select id from users_loot where id=? and bag like \'%,?,%", 56);
STRING_LITERAL(TMP2814, ",,", 2);
STRING_LITERAL(TMP2815, "  update users_loot set bag = ? where id = ?;\015\012  ", 49);
STRING_LITERAL(TMP2816, "select id from items where upper(name) = ?", 42);
STRING_LITERAL(TMP2817, "select name from items where id=? and armor=null", 48);
STRING_LITERAL(TMP2818, "  update users_loot set weapon = ? where id = ?;\015\012  ", 52);
STRING_LITERAL(TMP2819, "  update users_loot set armor = ? where id = ?;\015\012  ", 51);
STRING_LITERAL(TMP2820, "select rank from items where id = ?", 35);
STRING_LITERAL(TMP2821, "fists", 5);
STRING_LITERAL(TMP2822, "select name from items where id = ?", 35);
STRING_LITERAL(TMP2831, " Has hit ", 9);
STRING_LITERAL(TMP2832, " for ", 5);
STRING_LITERAL(TMP2833, " damage! ", 9);
STRING_LITERAL(TMP2835, "The battle has ended in a draw!", 31);
STRING_LITERAL(TMP2836, " is victorious and has stolen karma from the loser!", 51);
STRING_LITERAL(TMP2837, "select id from items where rank = ?", 35);
STRING_LITERAL(TMP2838, "  update users_loot set bag = bag + ? + \',\' where id = ?;\015\012  ", 61);
STRING_LITERAL(TMP2839, "\015\012", 2);
STRING_LITERAL(TMP2870, ":", 1);
STRING_LITERAL(TMP2871, " MODE ", 6);
STRING_LITERAL(TMP2872, " :+i", 4);
STRING_LITERAL(TMP2873, "JOIN ", 5);
STRING_LITERAL(TMP2875, "len(a) == L seq modified while iterating over it", 48);
STRING_LITERAL(TMP2879, "connection is closed", 20);
STRING_LITERAL(TMP2884, "PING", 4);
STRING_LITERAL(TMP2885, "PONG ", 5);
STRING_LITERAL(TMP2886, "QUIT", 4);
STRING_LITERAL(TMP2887, "PRIVMSG", 7);
STRING_LITERAL(TMP2888, ":!v", 3);
STRING_LITERAL(TMP2889, "PRIVMSG ", 8);
STRING_LITERAL(TMP2890, " :", 2);
STRING_LITERAL(TMP2891, ":!eval", 6);
STRING_LITERAL(TMP2892, "Cryptotoad", 10);
STRING_LITERAL(TMP2893, "cryptotoad", 10);
STRING_LITERAL(TMP2894, "eval.nim", 8);
STRING_LITERAL(TMP2896, "proc eval(): auto =", 19);
NIM_CONST TY167666 TMP2895 = {((NimStringDesc*) &TMP2896)}
;
STRING_LITERAL(TMP2898, ";", 1);
STRING_LITERAL(TMP2903, "when compiles(echo eval()): echo eval()", 39);
NIM_CONST TY167666 TMP2902 = {((NimStringDesc*) &TMP2903)}
;
STRING_LITERAL(TMP2905, "else: eval()", 12);
NIM_CONST TY167666 TMP2904 = {((NimStringDesc*) &TMP2905)}
;
STRING_LITERAL(TMP2906, "nim c --stackTrace:off --lineTrace:off --threads:off --checks:o"
"ff --fieldChecks:off --rangeChecks:on --boundChecks:on --overflo"
"wChecks:on --assertions:on --floatChecks:off --nanChecks:on --in"
"fChecks:off --opt:none --warnings:off --hints:off --threadanalys"
"is:off --verbosity:0 ", 276);
STRING_LITERAL(TMP2907, "./", 2);
STRING_LITERAL(TMP2910, "<no output>", 11);
STRING_LITERAL(TMP2911, ": ", 2);
STRING_LITERAL(TMP2912, ":!roll", 6);
STRING_LITERAL(TMP2913, "Please enter a formula (1d20) \015\015\012", 33);
static NIM_CONST TY77659 TMP2914 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP2916, " : Don\'t roll that many dice! Why would you need to?!??! \015\015\012", 60);
STRING_LITERAL(TMP2920, " rolled a ", 10);
STRING_LITERAL(TMP2921, "! \015\015\012", 5);
STRING_LITERAL(TMP2922, " : Please use smaller / positive / whole) numbers! \015\015\012", 54);
STRING_LITERAL(TMP2923, ":!upvote", 8);
STRING_LITERAL(TMP2924, " :You have upvoted ", 19);
STRING_LITERAL(TMP2925, " Bringing them to ", 18);
STRING_LITERAL(TMP2926, " karma.\015\015\012", 10);
STRING_LITERAL(TMP2927, " :You cannot upvote unless you are logged in, you cannot upvote"
" yourself, and you must specify a recipient!\015\015\012", 110);
STRING_LITERAL(TMP2928, ":!downvote", 10);
STRING_LITERAL(TMP2929, " :You have downvoted ", 21);
STRING_LITERAL(TMP2930, " :You cannot downvote unless you are logged in, you cannot down"
"vote yourself, and you must specify a recipient!\015\015\012", 114);
STRING_LITERAL(TMP2931, ":!karma", 7);
STRING_LITERAL(TMP2932, " has a total of ", 16);
STRING_LITERAL(TMP2933, ":!fight", 7);
STRING_LITERAL(TMP2934, ":!equip", 7);
STRING_LITERAL(TMP2935, " :You have equipped a ", 22);
STRING_LITERAL(TMP2936, "!\015\015\012", 4);
STRING_LITERAL(TMP2937, ":!login", 7);
STRING_LITERAL(TMP2938, " : Please enter a password! \015\015\012", 31);
STRING_LITERAL(TMP2939, " : You have logged in successfully! \015\015\012", 39);
STRING_LITERAL(TMP2940, " : Invalid password! \015\015\012", 24);
STRING_LITERAL(TMP2941, ":!logout", 8);
STRING_LITERAL(TMP2942, " : You have logged out successfully! \015\015\012", 40);
STRING_LITERAL(TMP2943, ":!register", 10);
STRING_LITERAL(TMP2944, "              insert into users_loot(id, weapon, armor, shield,"
" bag) values (?, null, null, null, null)", 103);
STRING_LITERAL(TMP2945, " : Your pass is ", 16);
STRING_LITERAL(TMP2946, " \015\015\012", 4);
STRING_LITERAL(TMP2947, " : Username is taken. \015\015\012", 25);
STRING_LITERAL(TMP2948, " : Your randomly generated pass is ", 35);
STRING_LITERAL(TMP2949, ":!help", 6);
STRING_LITERAL(TMP2950, " :!quote # - Retrieve quote / !addquote <quote> - adds a quote "
"to database\015\015\012", 77);
STRING_LITERAL(TMP2951, " :!roll <1d20> - Dice roller / !help - this menu\015\015\012", 51);
STRING_LITERAL(TMP2952, ":!quote", 7);
STRING_LITERAL(TMP2954, " :No... Bad human...\015\015\012", 23);
STRING_LITERAL(TMP2956, ":!addquote", 10);
STRING_LITERAL(TMP2957, " :Quote #", 9);
STRING_LITERAL(TMP2958, " added!\015\015\012", 10);
STRING_LITERAL(TMP2959, " :Please enter a quote.\015\015\012", 26);
STRING_LITERAL(TMP2960, ":!rawsql", 8);
STRING_LITERAL(TMP2961, " :Result: ", 10);
STRING_LITERAL(TMP2962, ":!blacklist", 11);
STRING_LITERAL(TMP2963, "insert into blacklist(id, name) values (null, ?)", 48);
STRING_LITERAL(TMP2964, ":http", 5);
STRING_LITERAL(TMP2965, ":https", 6);
STRING_LITERAL(TMP2972, "Nim httpclient/0.1", 18);
STRING_LITERAL(TMP2973, "1", 1);
STRING_LITERAL(TMP2974, "<title>", 7);
STRING_LITERAL(TMP2975, "2", 1);
STRING_LITERAL(TMP2976, "</title>", 8);
STRING_LITERAL(TMP2977, " - ", 3);
STRING_LITERAL(TMP2978, " - URL Preview\015\015\012", 17);
STRING_LITERAL(TMP2979, "N/A", 3);
STRING_LITERAL(TMP2980, "err!", 4);
STRING_LITERAL(TMP2981, "meme", 4);
STRING_LITERAL(TMP2982, "newfag", 6);
STRING_LITERAL(TMP2983, "triforce", 8);
STRING_LITERAL(TMP2984, " : \342\226\262\015\015\012", 9);
STRING_LITERAL(TMP2985, " :\342\226\262 \342\226\262\015\015\012", 12);
STRING_LITERAL(TMP2986, " has got a ", 11);
STRING_LITERAL(TMP2987, " as a random drop!\015\015\012", 21);
STRING_LITERAL(TMP2988, " would have gotten a drop here, but they\'re not registered.\015\015\012", 62);
extern TFrame* frameptr_17042;
extern TNimType NTI13606; /* seq[string] */
extern Tgcheap48616 gch_48644;
NimStringDesc* server_282087;
TY13606* loggedin_282102;
NU16 port_282104;
NimStringDesc* username_282105;
NimStringDesc* nick_282106;
TY13606* channels_282121;
FILE* log_282122;
NIM_BOOL islogging_282123;
NIM_BOOL outputting_282124;
Tsocketimpl136607* sock_282125;
NimStringDesc* buffer_282126;
Tsqlite3165291* db_282127;
extern TSafePoint* exchandler_17043;
extern Exception* currexception_17045;
extern Mtstate273035 mersennetwisterinst_277010;
NimStringDesc* channel_282844;
NimStringDesc* line_282971;
NI i_283037;
extern SslcontextHEX3Aobjecttype265375* defaultsslcontext_265377;

static N_INLINE(void, nimFrame)(TFrame* s) {
	NI LOC1;
	LOC1 = 0;
	{
		if (!(frameptr_17042 == NIM_NIL)) goto LA4;
		LOC1 = ((NI) 0);
	}
	goto LA2;
	LA4: ;
	{
		LOC1 = ((NI) ((NI16)((*frameptr_17042).calldepth + ((NI16) 1))));
	}
	LA2: ;
	(*s).calldepth = ((NI16) (LOC1));
	(*s).prev = frameptr_17042;
	frameptr_17042 = s;
	{
		if (!((*s).calldepth == ((NI16) 2000))) goto LA9;
		stackoverflow_20001();
	}
	LA9: ;
}

static N_INLINE(void, popFrame)(void) {
	frameptr_17042 = (*frameptr_17042).prev;
}

N_NIMCALL(NimStringDesc*, version_282001)(void) {
	NimStringDesc* result;
	nimfr("version", "usersystem.nim")
	result = 0;
	nimln(16, "usersystem.nim");
	result = copyString(((NimStringDesc*) &TMP2750));
	popFrame();
	return result;
}

static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	memcpy(((NCSTRING) ((&(*dest).data[((*dest).Sup.len)- 0]))), ((NCSTRING) ((*src).data)), (NI)((*src).Sup.len + ((NI) 1)));
	(*dest).Sup.len += (*src).Sup.len;
}

N_NIMCALL(NimStringDesc*, about_282007)(void) {
	NimStringDesc* result;
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	nimfr("about", "usersystem.nim")
	result = 0;
	nimln(19, "usersystem.nim");
	LOC1 = 0;
	LOC2 = 0;
	LOC2 = version_282001();
	LOC1 = rawNewString(LOC2->Sup.len + 23);
appendString(LOC1, ((NimStringDesc*) &TMP2751));
appendString(LOC1, LOC2);
appendString(LOC1, ((NimStringDesc*) &TMP2752));
	result = LOC1;
	popFrame();
	return result;
}

static N_INLINE(NI, addInt)(NI a, NI b) {
	NI result;
{	result = 0;
	result = (NI)((NU64)(a) + (NU64)(b));
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = (((NI) 0) <= (NI)(result ^ a));
		if (LOC3) goto LA4;
		LOC3 = (((NI) 0) <= (NI)(result ^ b));
		LA4: ;
		if (!LOC3) goto LA5;
		goto BeforeRet;
	}
	LA5: ;
	raiseOverflow();
	}BeforeRet: ;
	return result;
}

static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b) {
	NIM_BOOL result;
	NIM_BOOL LOC11;
	int LOC13;
{	result = 0;
	{
		if (!(a == b)) goto LA3;
		result = NIM_TRUE;
		goto BeforeRet;
	}
	LA3: ;
	{
		NIM_BOOL LOC7;
		LOC7 = 0;
		LOC7 = (a == NIM_NIL);
		if (LOC7) goto LA8;
		LOC7 = (b == NIM_NIL);
		LA8: ;
		if (!LOC7) goto LA9;
		result = NIM_FALSE;
		goto BeforeRet;
	}
	LA9: ;
	LOC11 = 0;
	LOC11 = ((*a).Sup.len == (*b).Sup.len);
	if (!(LOC11)) goto LA12;
	LOC13 = 0;
	LOC13 = memcmp(((NCSTRING) ((*a).data)), ((NCSTRING) ((*b).data)), (*a).Sup.len);
	LOC11 = (LOC13 == ((NI32) 0));
	LA12: ;
	result = LOC11;
	goto BeforeRet;
	}BeforeRet: ;
	return result;
}

static N_INLINE(NI, subInt)(NI a, NI b) {
	NI result;
{	result = 0;
	result = (NI)((NU64)(a) - (NU64)(b));
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = (((NI) 0) <= (NI)(result ^ a));
		if (LOC3) goto LA4;
		LOC3 = (((NI) 0) <= (NI)(result ^ (NI)((NU64) ~(b))));
		LA4: ;
		if (!LOC3) goto LA5;
		goto BeforeRet;
	}
	LA5: ;
	raiseOverflow();
	}BeforeRet: ;
	return result;
}

static N_INLINE(Tcell46746*, usrtocell_50246)(void* usr) {
	Tcell46746* result;
	nimfr("usrToCell", "gc.nim")
	result = 0;
	nimln(118, "gc.nim");
	result = ((Tcell46746*) ((NI)((NU64)(((NI) (usr))) - (NU64)(((NI)sizeof(Tcell46746))))));
	popFrame();
	return result;
}

static N_INLINE(void, rtladdzct_51804)(Tcell46746* c) {
	nimfr("rtlAddZCT", "gc.nim")
	nimln(199, "gc.nim");
	addzct_50217((&gch_48644.zct), c);
	popFrame();
}

static N_INLINE(void, nimGCunrefNoCycle)(void* p) {
	Tcell46746* c;
	nimfr("nimGCunrefNoCycle", "gc.nim")
	nimln(233, "gc.nim");
	c = usrtocell_50246(p);
	nimln(235, "gc.nim");
	{
		nimln(167, "gc.nim");
		(*c).refcount -= ((NI) 8);
		nimln(168, "gc.nim");
		if (!((NU64)((*c).refcount) < (NU64)(((NI) 8)))) goto LA3;
		nimln(236, "gc.nim");
		rtladdzct_51804(c);
	}
	LA3: ;
	popFrame();
}

N_NIMCALL(TY13606*, chansplit_282013)(NimStringDesc* raw) {
	TY13606* result;
	nimfr("chansplit", "usersystem.nim")
	result = 0;
	nimln(23, "usersystem.nim");
	result = (TY13606*) newSeq((&NTI13606), 0);
	{
		NimStringDesc* channel_282034;
		NI last_282049;
		channel_282034 = 0;
		nimln(293, "strutils.nim");
		last_282049 = ((NI) 0);
		nimln(294, "strutils.nim");
		{
			if (!(((NI) 0) < (raw ? raw->Sup.len : 0))) goto LA4;
			{
				nimln(295, "strutils.nim");
				while (1) {
					NI first_282051;
					NI TMP2756;
					NimStringDesc* LOC13;
					NimStringDesc* LOC14;
					NI TMP2758;
					if (!(last_282049 <= (raw ? raw->Sup.len : 0))) goto LA7;
					nimln(296, "strutils.nim");
					first_282051 = last_282049;
					{
						nimln(297, "strutils.nim");
						while (1) {
							NIM_BOOL LOC10;
							NI TMP2753;
							NimStringDesc* LOC12;
							NI TMP2755;
							LOC10 = 0;
							LOC10 = (last_282049 < (raw ? raw->Sup.len : 0));
							if (!(LOC10)) goto LA11;
							TMP2753 = addInt(last_282049, ((NI) 0));
							LOC12 = 0;
							LOC12 = copyStrLast(raw, last_282049, (NI)(TMP2753));
							LOC10 = !(eqStrings(LOC12, ((NimStringDesc*) &TMP2754)));
							LA11: ;
							if (!LOC10) goto LA9;
							nimln(298, "strutils.nim");
							TMP2755 = addInt(last_282049, ((NI) 1));
							last_282049 = (NI)(TMP2755);
						} LA9: ;
					}
					nimln(299, "strutils.nim");
					TMP2756 = subInt(last_282049, ((NI) 1));
					channel_282034 = copyStrLast(raw, first_282051, (NI)(TMP2756));
					nimln(26, "usersystem.nim");
					LOC13 = 0;
					LOC13 = rawNewString(channel_282034->Sup.len + 1);
appendString(LOC13, ((NimStringDesc*) &TMP2757));
appendString(LOC13, channel_282034);
					result = (TY13606*) incrSeq(&(result)->Sup, sizeof(NimStringDesc*));
					LOC14 = 0;
					LOC14 = result->data[result->Sup.len-1]; result->data[result->Sup.len-1] = copyStringRC1(LOC13);
					if (LOC14) nimGCunrefNoCycle(LOC14);
					nimln(300, "strutils.nim");
					TMP2758 = addInt(last_282049, ((NI) 1));
					last_282049 = (NI)(TMP2758);
				} LA7: ;
			}
		}
		LA4: ;
	}
	popFrame();
	return result;
}

static N_INLINE(NimStringDesc*, HEX5BHEX5D_88054)(NimStringDesc* s, Slice88061 x) {
	NimStringDesc* result;
	nimfr("[]", "system.nim")
	result = 0;
	nimln(2880, "system.nim");
	result = copyStrLast(s, x.a, x.b);
	popFrame();
	return result;
}

static N_INLINE(Slice88061, HEX2EHEX2E_110273)(NI a, NI b) {
	Slice88061 result;
	nimfr("..", "system.nim")
	memset((void*)(&result), 0, sizeof(result));
	nimln(234, "system.nim");
	result.a = a;
	nimln(235, "system.nim");
	result.b = b;
	popFrame();
	return result;
}

N_NIMCALL(NimStringDesc*, getnick_282070)(NimStringDesc* raw) {
	NimStringDesc* result;
	NI LOC1;
	NI TMP2759;
	Slice88061 LOC2;
	nimfr("getNick", "usersystem.nim")
	result = 0;
	nimln(30, "usersystem.nim");
	LOC1 = 0;
	LOC1 = nsuFindChar(raw, 33, ((NI) 0));
	TMP2759 = subInt(LOC1, ((NI) 1));
	LOC2 = HEX2EHEX2E_110273(((NI) 1), (NI)(TMP2759));
	result = HEX5BHEX5D_88054(raw, LOC2);
	popFrame();
	return result;
}

static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src) {
	nimfr("asgnRefNoCycle", "gc.nim")
	nimln(251, "gc.nim");
	{
		Tcell46746* c;
		if (!!((src == NIM_NIL))) goto LA3;
		nimln(252, "gc.nim");
		c = usrtocell_50246(src);
		nimln(169, "gc.nim");
		(*c).refcount += ((NI) 8);
	}
	LA3: ;
	nimln(254, "gc.nim");
	{
		Tcell46746* c;
		if (!!(((*dest) == NIM_NIL))) goto LA7;
		nimln(255, "gc.nim");
		c = usrtocell_50246((*dest));
		nimln(256, "gc.nim");
		{
			nimln(167, "gc.nim");
			(*c).refcount -= ((NI) 8);
			nimln(168, "gc.nim");
			if (!((NU64)((*c).refcount) < (NU64)(((NI) 8)))) goto LA11;
			nimln(257, "gc.nim");
			rtladdzct_51804(c);
		}
		LA11: ;
	}
	LA7: ;
	nimln(258, "gc.nim");
	(*dest) = src;
	popFrame();
}

static N_INLINE(NimStringDesc*, sql_167021)(NimStringDesc* query) {
	NimStringDesc* result;
	nimfr("sql", "db_sqlite.nim")
	result = 0;
	nimln(34, "db_sqlite.nim");
	result = copyString(query);
	popFrame();
	return result;
}

N_NIMCALL(NimStringDesc*, inttoitem_282137)(NI itemid) {
	NimStringDesc* result;
	nimfr("intToItem", "usersystem.nim")
	result = 0;
	nimln(83, "usersystem.nim");
	switch (itemid) {
	case ((NI) 1):
	{
		nimln(85, "usersystem.nim");
		result = copyString(((NimStringDesc*) &TMP2788));
	}
	break;
	default:
	{
		nimln(87, "usersystem.nim");
		result = copyString(((NimStringDesc*) &TMP2789));
	}
	break;
	}
	popFrame();
	return result;
}

N_NIMCALL(NIM_BOOL, isloggedin_282144)(NimStringDesc* name) {
	NIM_BOOL result;
	nimfr("isLoggedIn", "usersystem.nim")
{	result = 0;
	{
		NI i_282160;
		NI HEX3Atmp_282162;
		NI res_282165;
		i_282160 = 0;
		HEX3Atmp_282162 = 0;
		nimln(90, "usersystem.nim");
		HEX3Atmp_282162 = (loggedin_282102 ? (loggedin_282102->Sup.len-1) : -1);
		nimln(1598, "system.nim");
		res_282165 = ((NI) 0);
		{
			nimln(1599, "system.nim");
			while (1) {
				NI TMP2790;
				if (!(res_282165 <= HEX3Atmp_282162)) goto LA3;
				nimln(1600, "system.nim");
				i_282160 = res_282165;
				nimln(91, "usersystem.nim");
				{
					NI LOC6;
					if ((NU)(i_282160) >= (NU)(loggedin_282102->Sup.len)) raiseIndexError();
					LOC6 = 0;
					LOC6 = nsuCmpIgnoreCase(loggedin_282102->data[i_282160], name);
					if (!(LOC6 == ((NI) 0))) goto LA7;
					nimln(92, "usersystem.nim");
					result = NIM_TRUE;
					nimln(93, "usersystem.nim");
					goto BeforeRet;
				}
				LA7: ;
				nimln(1614, "system.nim");
				TMP2790 = addInt(res_282165, ((NI) 1));
				res_282165 = (NI)(TMP2790);
			} LA3: ;
		}
	}
	nimln(94, "usersystem.nim");
	result = NIM_FALSE;
	}BeforeRet: ;
	popFrame();
	return result;
}

static N_INLINE(void, pushSafePoint)(TSafePoint* s) {
	(*s).hasRaiseAction = NIM_FALSE;
	(*s).prev = exchandler_17043;
	exchandler_17043 = s;
}

static N_INLINE(void, popSafePoint)(void) {
	exchandler_17043 = (*exchandler_17043).prev;
}

static N_INLINE(void, setFrame)(TFrame* s) {
	frameptr_17042 = s;
}

static N_INLINE(NIM_BOOL, canbecycleroot_50267)(Tcell46746* c) {
	NIM_BOOL result;
	nimfr("canBeCycleRoot", "gc.nim")
	result = 0;
	nimln(121, "gc.nim");
	result = !((((*(*c).typ).flags &(1<<((((NU8) 1))&7)))!=0));
	popFrame();
	return result;
}

static N_INLINE(void, rtladdcycleroot_51023)(Tcell46746* c) {
	nimfr("rtlAddCycleRoot", "gc.nim")
	nimln(189, "gc.nim");
	{
		if (!!((((NI) ((NI)((*c).refcount & ((NI) 3)))) == ((NI) 3)))) goto LA3;
		nimln(139, "gc.nim");
		(*c).refcount = (NI)((NI)((*c).refcount & ((NI) -4)) | ((NI) 3));
		nimln(191, "gc.nim");
		incl_47465((&gch_48644.cycleroots), c);
	}
	LA3: ;
	popFrame();
}

static N_INLINE(void, incref_52622)(Tcell46746* c) {
	nimfr("incRef", "gc.nim")
	nimln(216, "gc.nim");
	(*c).refcount = (NI)((NU64)((*c).refcount) + (NU64)(((NI) 8)));
	nimln(219, "gc.nim");
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = canbecycleroot_50267(c);
		if (!LOC3) goto LA4;
		nimln(220, "gc.nim");
		rtladdcycleroot_51023(c);
	}
	LA4: ;
	popFrame();
}

static N_INLINE(void, decref_52204)(Tcell46746* c) {
	nimfr("decRef", "gc.nim")
	nimln(206, "gc.nim");
	{
		nimln(167, "gc.nim");
		(*c).refcount -= ((NI) 8);
		nimln(168, "gc.nim");
		if (!((NU64)((*c).refcount) < (NU64)(((NI) 8)))) goto LA3;
		nimln(207, "gc.nim");
		rtladdzct_51804(c);
	}
	goto LA1;
	LA3: ;
	{
		NIM_BOOL LOC6;
		nimln(208, "gc.nim");
		LOC6 = 0;
		LOC6 = canbecycleroot_50267(c);
		if (!LOC6) goto LA7;
		nimln(211, "gc.nim");
		rtladdcycleroot_51023(c);
	}
	goto LA1;
	LA7: ;
	LA1: ;
	popFrame();
}

static N_INLINE(void, asgnRef)(void** dest, void* src) {
	nimfr("asgnRef", "gc.nim")
	nimln(244, "gc.nim");
	{
		Tcell46746* LOC5;
		if (!!((src == NIM_NIL))) goto LA3;
		LOC5 = 0;
		LOC5 = usrtocell_50246(src);
		incref_52622(LOC5);
	}
	LA3: ;
	nimln(245, "gc.nim");
	{
		Tcell46746* LOC10;
		if (!!(((*dest) == NIM_NIL))) goto LA8;
		LOC10 = 0;
		LOC10 = usrtocell_50246((*dest));
		decref_52204(LOC10);
	}
	LA8: ;
	nimln(246, "gc.nim");
	(*dest) = src;
	popFrame();
}

static N_INLINE(void, popCurrentException)(void) {
	asgnRef((void**) (&currexception_17045), (*currexception_17045).parent);
}

N_NIMCALL(NIM_BOOL, checkuser_282181)(NimStringDesc* name) {
	NIM_BOOL volatile result;
	TSafePoint TMP2791;
	nimfr("checkUser", "usersystem.nim")
	result = 0;
	nimln(97, "usersystem.nim");
	pushSafePoint(&TMP2791);
	TMP2791.status = setjmp(TMP2791.context);
	if (TMP2791.status == 0) {
		NimStringDesc* res;
		NimStringDesc* LOC2;
		TY167666 LOC3;
		nimln(98, "usersystem.nim");
		LOC2 = 0;
		LOC2 = sql_167021(((NimStringDesc*) &TMP2792));
		memset((void*)LOC3, 0, sizeof(LOC3));
		LOC3[0] = nsuToUpperStr(name);
		res = getvalue_167577(db_282127, LOC2, LOC3, 1);
		nimln(99, "usersystem.nim");
		{
			NI row;
			if (!!(((res) && (res)->Sup.len == 0))) goto LA6;
			nimln(100, "usersystem.nim");
			row = nsuParseInt(res);
			nimln(101, "usersystem.nim");
			{
				if (!(((NI) 0) < row)) goto LA10;
				nimln(102, "usersystem.nim");
				result = NIM_TRUE;
			}
			goto LA8;
			LA10: ;
			{
				nimln(104, "usersystem.nim");
				result = NIM_FALSE;
			}
			LA8: ;
		}
		LA6: ;
		popSafePoint();
	}
	else {
		popSafePoint();
		setFrame((TFrame*)&FR);
		{
			TMP2791.status = 0;
			nimln(106, "usersystem.nim");
			result = NIM_FALSE;
			popCurrentException();
		}
	}
	if (TMP2791.status != 0) reraiseException();
	popFrame();
	return result;
}

N_NIMCALL(NIM_BOOL, checkblacklist_282192)(NimStringDesc* name) {
	NIM_BOOL volatile result;
	TSafePoint TMP2793;
	nimfr("checkBlacklist", "usersystem.nim")
	result = 0;
	nimln(109, "usersystem.nim");
	pushSafePoint(&TMP2793);
	TMP2793.status = setjmp(TMP2793.context);
	if (TMP2793.status == 0) {
		NimStringDesc* res;
		NimStringDesc* LOC2;
		TY167666 LOC3;
		nimln(110, "usersystem.nim");
		LOC2 = 0;
		LOC2 = sql_167021(((NimStringDesc*) &TMP2794));
		memset((void*)LOC3, 0, sizeof(LOC3));
		LOC3[0] = nsuToUpperStr(name);
		res = getvalue_167577(db_282127, LOC2, LOC3, 1);
		nimln(111, "usersystem.nim");
		{
			NI row;
			if (!!(((res) && (res)->Sup.len == 0))) goto LA6;
			nimln(112, "usersystem.nim");
			row = nsuParseInt(res);
			nimln(113, "usersystem.nim");
			{
				if (!(((NI) 0) < row)) goto LA10;
				nimln(114, "usersystem.nim");
				result = NIM_TRUE;
			}
			goto LA8;
			LA10: ;
			{
				nimln(116, "usersystem.nim");
				result = NIM_FALSE;
			}
			LA8: ;
		}
		LA6: ;
		popSafePoint();
	}
	else {
		popSafePoint();
		setFrame((TFrame*)&FR);
		{
			TMP2793.status = 0;
			nimln(118, "usersystem.nim");
			result = NIM_FALSE;
			popCurrentException();
		}
	}
	if (TMP2793.status != 0) reraiseException();
	popFrame();
	return result;
}

N_NIMCALL(NimStringDesc*, getquote_282203)(NI id) {
	NimStringDesc* result;
	TY13606* row;
	NimStringDesc* LOC1;
	TY167666 LOC2;
	NimStringDesc* LOC7;
	nimfr("getQuote", "usersystem.nim")
{	result = 0;
	nimln(121, "usersystem.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2795));
	memset((void*)LOC2, 0, sizeof(LOC2));
	LOC2[0] = nimIntToStr(id);
	row = getrow_167472(db_282127, LOC1, LOC2, 1);
	nimln(122, "usersystem.nim");
	{
		if ((NU)(((NI) 0)) >= (NU)(row->Sup.len)) raiseIndexError();
		if (!((row->data[((NI) 0)]) && (row->data[((NI) 0)])->Sup.len == 0)) goto LA5;
		nimln(123, "usersystem.nim");
		result = copyString(((NimStringDesc*) &TMP2762));
		goto BeforeRet;
	}
	LA5: ;
	nimln(124, "usersystem.nim");
	LOC7 = 0;
	if ((NU)(((NI) 0)) >= (NU)(row->Sup.len)) raiseIndexError();
	if ((NU)(((NI) 1)) >= (NU)(row->Sup.len)) raiseIndexError();
	LOC7 = rawNewString(row->data[((NI) 0)]->Sup.len + row->data[((NI) 1)]->Sup.len + 10);
appendString(LOC7, ((NimStringDesc*) &TMP2796));
appendString(LOC7, row->data[((NI) 0)]);
appendString(LOC7, ((NimStringDesc*) &TMP2797));
appendString(LOC7, row->data[((NI) 1)]);
	result = LOC7;
	goto BeforeRet;
	}BeforeRet: ;
	popFrame();
	return result;
}

N_NIMCALL(NI, addquote_282213)(NimStringDesc* content) {
	NI result;
	NimStringDesc* LOC1;
	TY167666 LOC2;
	NI64 LOC3;
	nimfr("addQuote", "usersystem.nim")
	result = 0;
	nimln(127, "usersystem.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2798));
	memset((void*)LOC2, 0, sizeof(LOC2));
	LOC2[0] = copyString(content);
	LOC3 = 0;
	LOC3 = tryinsertid_167593(db_282127, LOC1, LOC2, 1);
	result = ((NI) (LOC3));
	popFrame();
	return result;
}

N_NIMCALL(NI, adduser_282223)(NimStringDesc* name, NimStringDesc* pass) {
	NI result;
	nimfr("addUser", "usersystem.nim")
{	result = 0;
	nimln(130, "usersystem.nim");
	{
		NIM_BOOL LOC3;
		NimStringDesc* LOC6;
		TY282228 LOC7;
		NI64 LOC8;
		LOC3 = 0;
		LOC3 = checkuser_282181(name);
		if (!!(LOC3)) goto LA4;
		nimln(131, "usersystem.nim");
		LOC6 = 0;
		LOC6 = sql_167021(((NimStringDesc*) &TMP2799));
		memset((void*)LOC7, 0, sizeof(LOC7));
		LOC7[0] = copyString(name);
		LOC7[1] = copyString(pass);
		LOC8 = 0;
		LOC8 = tryinsertid_167593(db_282127, LOC6, LOC7, 2);
		result = ((NI) (LOC8));
	}
	goto LA1;
	LA4: ;
	{
		nimln(133, "usersystem.nim");
		result = ((NI) -1);
		goto BeforeRet;
	}
	LA1: ;
	}BeforeRet: ;
	popFrame();
	return result;
}

N_NIMCALL(NI, getquotecount_282234)(void) {
	NI result;
	NimStringDesc* LOC1;
	TY161637 LOC2;
	NimStringDesc* LOC3;
	nimfr("getQuoteCount", "usersystem.nim")
	result = 0;
	nimln(136, "usersystem.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2800));
	memset((void*)LOC2, 0, sizeof(LOC2));
	LOC3 = 0;
	LOC3 = getvalue_167577(db_282127, LOC1, LOC2, 0);
	result = nsuParseInt(LOC3);
	popFrame();
	return result;
}

N_NIMCALL(NIM_BOOL, loginuser_282244)(NimStringDesc* name, NimStringDesc* pass) {
	NIM_BOOL volatile result;
	TSafePoint TMP2801;
	nimfr("loginUser", "usersystem.nim")
	result = 0;
	nimln(141, "usersystem.nim");
	pushSafePoint(&TMP2801);
	TMP2801.status = setjmp(TMP2801.context);
	if (TMP2801.status == 0) {
		NI row;
		NimStringDesc* LOC2;
		TY282228 LOC3;
		NimStringDesc* LOC4;
		nimln(142, "usersystem.nim");
		LOC2 = 0;
		LOC2 = sql_167021(((NimStringDesc*) &TMP2802));
		memset((void*)LOC3, 0, sizeof(LOC3));
		LOC3[0] = nsuToUpperStr(name);
		LOC3[1] = copyString(pass);
		LOC4 = 0;
		LOC4 = getvalue_167577(db_282127, LOC2, LOC3, 2);
		row = nsuParseInt(LOC4);
		nimln(143, "usersystem.nim");
		{
			if (!(((NI) 0) < row)) goto LA7;
			nimln(144, "usersystem.nim");
			result = NIM_TRUE;
		}
		goto LA5;
		LA7: ;
		{
			nimln(146, "usersystem.nim");
			result = NIM_FALSE;
		}
		LA5: ;
		popSafePoint();
	}
	else {
		popSafePoint();
		setFrame((TFrame*)&FR);
		{
			TMP2801.status = 0;
			nimln(148, "usersystem.nim");
			result = NIM_FALSE;
			popCurrentException();
		}
	}
	if (TMP2801.status != 0) reraiseException();
	popFrame();
	return result;
}

N_NIMCALL(NIM_BOOL, logoutuser_282255)(NimStringDesc* name) {
	NIM_BOOL result;
	nimfr("logoutUser", "usersystem.nim")
{	result = 0;
	nimln(152, "usersystem.nim");
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = isloggedin_282144(name);
		if (!LOC3) goto LA4;
		{
			NI i_282271;
			NI HEX3Atmp_282344;
			NI res_282347;
			i_282271 = 0;
			HEX3Atmp_282344 = 0;
			nimln(153, "usersystem.nim");
			HEX3Atmp_282344 = (loggedin_282102 ? (loggedin_282102->Sup.len-1) : -1);
			nimln(1598, "system.nim");
			res_282347 = ((NI) 0);
			{
				nimln(1599, "system.nim");
				while (1) {
					NI TMP2803;
					if (!(res_282347 <= HEX3Atmp_282344)) goto LA8;
					nimln(1600, "system.nim");
					i_282271 = res_282347;
					nimln(154, "usersystem.nim");
					{
						NI LOC11;
						if ((NU)(i_282271) >= (NU)(loggedin_282102->Sup.len)) raiseIndexError();
						LOC11 = 0;
						LOC11 = nsuCmpIgnoreCase(loggedin_282102->data[i_282271], name);
						if (!(LOC11 == ((NI) 0))) goto LA12;
						nimln(155, "usersystem.nim");
						delete_282273((&loggedin_282102), i_282271, i_282271);
						nimln(156, "usersystem.nim");
						result = NIM_TRUE;
						nimln(157, "usersystem.nim");
						goto BeforeRet;
					}
					LA12: ;
					nimln(1614, "system.nim");
					TMP2803 = addInt(res_282347, ((NI) 1));
					res_282347 = (NI)(TMP2803);
				} LA8: ;
			}
		}
	}
	LA4: ;
	nimln(158, "usersystem.nim");
	result = NIM_FALSE;
	}BeforeRet: ;
	popFrame();
	return result;
}

N_NIMCALL(NI, upvote_282363)(NimStringDesc* name) {
	NI result;
	NimStringDesc* LOC1;
	TY167666 LOC2;
	NimStringDesc* totalvotes;
	NimStringDesc* LOC3;
	TY167666 LOC4;
	nimfr("upvote", "usersystem.nim")
	result = 0;
	nimln(162, "usersystem.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2804));
	memset((void*)LOC2, 0, sizeof(LOC2));
	nimln(164, "usersystem.nim");
	LOC2[0] = nsuToUpperStr(name);
	exec_167155(db_282127, LOC1, LOC2, 1);
	nimln(165, "usersystem.nim");
	LOC3 = 0;
	LOC3 = sql_167021(((NimStringDesc*) &TMP2805));
	memset((void*)LOC4, 0, sizeof(LOC4));
	LOC4[0] = nsuToUpperStr(name);
	totalvotes = getvalue_167577(db_282127, LOC3, LOC4, 1);
	nimln(166, "usersystem.nim");
	{
		if (!((totalvotes) && (totalvotes)->Sup.len == 0)) goto LA7;
		nimln(167, "usersystem.nim");
		result = ((NI) -1);
	}
	goto LA5;
	LA7: ;
	{
		nimln(169, "usersystem.nim");
		result = nsuParseInt(totalvotes);
	}
	LA5: ;
	popFrame();
	return result;
}

N_NIMCALL(NI, downvote_282375)(NimStringDesc* name) {
	NI result;
	NimStringDesc* LOC1;
	TY167666 LOC2;
	NimStringDesc* totalvotes;
	NimStringDesc* LOC3;
	TY167666 LOC4;
	nimfr("downvote", "usersystem.nim")
	result = 0;
	nimln(173, "usersystem.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2806));
	memset((void*)LOC2, 0, sizeof(LOC2));
	nimln(175, "usersystem.nim");
	LOC2[0] = nsuToUpperStr(name);
	exec_167155(db_282127, LOC1, LOC2, 1);
	nimln(176, "usersystem.nim");
	LOC3 = 0;
	LOC3 = sql_167021(((NimStringDesc*) &TMP2805));
	memset((void*)LOC4, 0, sizeof(LOC4));
	LOC4[0] = nsuToUpperStr(name);
	totalvotes = getvalue_167577(db_282127, LOC3, LOC4, 1);
	nimln(177, "usersystem.nim");
	{
		if (!((totalvotes) && (totalvotes)->Sup.len == 0)) goto LA7;
		nimln(178, "usersystem.nim");
		result = ((NI) -1);
	}
	goto LA5;
	LA7: ;
	{
		nimln(180, "usersystem.nim");
		result = nsuParseInt(totalvotes);
	}
	LA5: ;
	popFrame();
	return result;
}

N_NIMCALL(NI, karma_282387)(NimStringDesc* name) {
	NI volatile result;
	TSafePoint TMP2807;
	nimfr("karma", "usersystem.nim")
	result = 0;
	nimln(183, "usersystem.nim");
	pushSafePoint(&TMP2807);
	TMP2807.status = setjmp(TMP2807.context);
	if (TMP2807.status == 0) {
		NimStringDesc* LOC2;
		TY167666 LOC3;
		NimStringDesc* LOC4;
		nimln(184, "usersystem.nim");
		LOC2 = 0;
		LOC2 = sql_167021(((NimStringDesc*) &TMP2805));
		memset((void*)LOC3, 0, sizeof(LOC3));
		LOC3[0] = nsuToUpperStr(name);
		LOC4 = 0;
		LOC4 = getvalue_167577(db_282127, LOC2, LOC3, 1);
		result = nsuParseInt(LOC4);
		popSafePoint();
	}
	else {
		popSafePoint();
		setFrame((TFrame*)&FR);
		{
			TMP2807.status = 0;
			nimln(186, "usersystem.nim");
			result = ((NI) -1);
			popCurrentException();
		}
	}
	if (TMP2807.status != 0) reraiseException();
	popFrame();
	return result;
}

N_NIMCALL(NI, userid_282396)(NimStringDesc* name) {
	NI volatile result;
	TSafePoint TMP2808;
	nimfr("userID", "usersystem.nim")
	result = 0;
	nimln(189, "usersystem.nim");
	pushSafePoint(&TMP2808);
	TMP2808.status = setjmp(TMP2808.context);
	if (TMP2808.status == 0) {
		NimStringDesc* LOC2;
		TY167666 LOC3;
		NimStringDesc* LOC4;
		nimln(190, "usersystem.nim");
		LOC2 = 0;
		LOC2 = sql_167021(((NimStringDesc*) &TMP2792));
		memset((void*)LOC3, 0, sizeof(LOC3));
		LOC3[0] = nsuToUpperStr(name);
		LOC4 = 0;
		LOC4 = getvalue_167577(db_282127, LOC2, LOC3, 1);
		result = nsuParseInt(LOC4);
		popSafePoint();
	}
	else {
		popSafePoint();
		setFrame((TFrame*)&FR);
		{
			TMP2808.status = 0;
			nimln(192, "usersystem.nim");
			result = ((NI) -1);
			popCurrentException();
		}
	}
	if (TMP2808.status != 0) reraiseException();
	popFrame();
	return result;
}

N_NIMCALL(NI, getweapon_282422)(NimStringDesc* user) {
	NI result;
	NimStringDesc* LOC1;
	TY167666 LOC2;
	NI LOC3;
	NimStringDesc* LOC4;
	nimfr("getWeapon", "lootdrops.nim")
	result = 0;
	nimln(14, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2809));
	memset((void*)LOC2, 0, sizeof(LOC2));
	LOC3 = 0;
	LOC3 = userid_282396(user);
	LOC2[0] = nimIntToStr(LOC3);
	LOC4 = 0;
	LOC4 = getvalue_167577(db_282127, LOC1, LOC2, 1);
	result = nsuParseInt(LOC4);
	popFrame();
	return result;
}

N_NIMCALL(NI, getarmor_282431)(NimStringDesc* user) {
	NI result;
	NimStringDesc* LOC1;
	TY167666 LOC2;
	NI LOC3;
	NimStringDesc* LOC4;
	nimfr("getArmor", "lootdrops.nim")
	result = 0;
	nimln(18, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2810));
	memset((void*)LOC2, 0, sizeof(LOC2));
	LOC3 = 0;
	LOC3 = userid_282396(user);
	LOC2[0] = nimIntToStr(LOC3);
	LOC4 = 0;
	LOC4 = getvalue_167577(db_282127, LOC1, LOC2, 1);
	result = nsuParseInt(LOC4);
	popFrame();
	return result;
}

N_NIMCALL(NI, getshield_282440)(NimStringDesc* user) {
	NI result;
	NimStringDesc* LOC1;
	TY167666 LOC2;
	NI LOC3;
	NimStringDesc* LOC4;
	nimfr("getShield", "lootdrops.nim")
	result = 0;
	nimln(22, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2811));
	memset((void*)LOC2, 0, sizeof(LOC2));
	LOC3 = 0;
	LOC3 = userid_282396(user);
	LOC2[0] = nimIntToStr(LOC3);
	LOC4 = 0;
	LOC4 = getvalue_167577(db_282127, LOC1, LOC2, 1);
	result = nsuParseInt(LOC4);
	popFrame();
	return result;
}

N_NIMCALL(NimStringDesc*, getbag_282449)(NimStringDesc* user) {
	NimStringDesc* result;
	NimStringDesc* LOC1;
	TY167666 LOC2;
	NI LOC3;
	nimfr("getBag", "lootdrops.nim")
	result = 0;
	nimln(26, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2812));
	memset((void*)LOC2, 0, sizeof(LOC2));
	LOC3 = 0;
	LOC3 = userid_282396(user);
	LOC2[0] = nimIntToStr(LOC3);
	result = getvalue_167577(db_282127, LOC1, LOC2, 1);
	popFrame();
	return result;
}

N_NIMCALL(NIM_BOOL, hasitem_282458)(NI item, NimStringDesc* user) {
	NIM_BOOL result;
	NimStringDesc* LOC1;
	TY282228 LOC2;
	NI LOC3;
	nimfr("hasItem", "lootdrops.nim")
	result = 0;
	nimln(29, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2813));
	memset((void*)LOC2, 0, sizeof(LOC2));
	LOC3 = 0;
	LOC3 = userid_282396(user);
	LOC2[0] = nimIntToStr(LOC3);
	LOC2[1] = nimIntToStr(item);
	result = tryexec_167138(db_282127, LOC1, LOC2, 2);
	popFrame();
	return result;
}

N_NIMCALL(NIM_BOOL, removeitem_282468)(NI item, NimStringDesc* user) {
	NIM_BOOL result;
	NimStringDesc* bag;
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	NimStringDesc* LOC3;
	TY282228 LOC4;
	NI LOC5;
	nimfr("removeItem", "lootdrops.nim")
	result = 0;
	bag = 0;
	nimln(34, "lootdrops.nim");
	bag = getbag_282449(user);
	nimln(36, "lootdrops.nim");
	LOC1 = 0;
	LOC2 = 0;
	LOC2 = nimIntToStr(item);
	LOC1 = rawNewString(LOC2->Sup.len + 2);
appendString(LOC1, ((NimStringDesc*) &TMP2754));
appendString(LOC1, LOC2);
appendString(LOC1, ((NimStringDesc*) &TMP2754));
	bag = nsuReplaceStr(bag, LOC1, ((NimStringDesc*) &TMP2754));
	nimln(38, "lootdrops.nim");
	bag = nsuReplaceStr(bag, ((NimStringDesc*) &TMP2814), ((NimStringDesc*) &TMP2754));
	nimln(40, "lootdrops.nim");
	LOC3 = 0;
	LOC3 = sql_167021(((NimStringDesc*) &TMP2815));
	memset((void*)LOC4, 0, sizeof(LOC4));
	nimln(42, "lootdrops.nim");
	LOC4[0] = nimIntToStr(item);
	LOC5 = 0;
	LOC5 = userid_282396(user);
	LOC4[1] = nimIntToStr(LOC5);
	result = tryexec_167138(db_282127, LOC3, LOC4, 2);
	popFrame();
	return result;
}

N_NIMCALL(NI, itemid_282480)(NimStringDesc* item) {
	NI result;
	NimStringDesc* LOC1;
	TY167666 LOC2;
	NimStringDesc* LOC3;
	nimfr("itemID", "lootdrops.nim")
	result = 0;
	nimln(45, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2816));
	memset((void*)LOC2, 0, sizeof(LOC2));
	LOC2[0] = nsuToUpperStr(item);
	LOC3 = 0;
	LOC3 = getvalue_167577(db_282127, LOC1, LOC2, 1);
	result = nsuParseInt(LOC3);
	popFrame();
	return result;
}

N_NIMCALL(NIM_BOOL, isweapon_282489)(NI item) {
	NIM_BOOL result;
	NimStringDesc* LOC1;
	TY167666 LOC2;
	nimfr("isWeapon", "lootdrops.nim")
	result = 0;
	nimln(48, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2817));
	memset((void*)LOC2, 0, sizeof(LOC2));
	LOC2[0] = nimIntToStr(item);
	result = tryexec_167138(db_282127, LOC1, LOC2, 1);
	popFrame();
	return result;
}

N_NIMCALL(void, setweapon_282498)(NI item, NimStringDesc* user) {
	NimStringDesc* LOC1;
	TY282228 LOC2;
	NI LOC3;
	NIM_BOOL LOC4;
	nimfr("setWeapon", "lootdrops.nim")
	nimln(51, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2818));
	memset((void*)LOC2, 0, sizeof(LOC2));
	nimln(53, "lootdrops.nim");
	LOC2[0] = nimIntToStr(item);
	LOC3 = 0;
	LOC3 = userid_282396(user);
	LOC2[1] = nimIntToStr(LOC3);
	LOC4 = 0;
	LOC4 = tryexec_167138(db_282127, LOC1, LOC2, 2);
	popFrame();
}

N_NIMCALL(void, setarmor_282507)(NI item, NimStringDesc* user) {
	NimStringDesc* LOC1;
	TY282228 LOC2;
	NI LOC3;
	NIM_BOOL LOC4;
	nimfr("setArmor", "lootdrops.nim")
	nimln(56, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2819));
	memset((void*)LOC2, 0, sizeof(LOC2));
	nimln(58, "lootdrops.nim");
	LOC2[0] = nimIntToStr(item);
	LOC3 = 0;
	LOC3 = userid_282396(user);
	LOC2[1] = nimIntToStr(LOC3);
	LOC4 = 0;
	LOC4 = tryexec_167138(db_282127, LOC1, LOC2, 2);
	popFrame();
}

N_NIMCALL(void, equipitem_282516)(NI item, NimStringDesc* user) {
	nimfr("equipItem", "lootdrops.nim")
	nimln(62, "lootdrops.nim");
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = hasitem_282458(item, user);
		if (!LOC3) goto LA4;
		nimln(63, "lootdrops.nim");
		{
			NIM_BOOL LOC8;
			LOC8 = 0;
			LOC8 = removeitem_282468(item, user);
			if (!LOC8) goto LA9;
			nimln(64, "lootdrops.nim");
			{
				NIM_BOOL LOC13;
				LOC13 = 0;
				LOC13 = isweapon_282489(item);
				if (!LOC13) goto LA14;
				nimln(65, "lootdrops.nim");
				setweapon_282498(item, user);
			}
			goto LA11;
			LA14: ;
			{
				nimln(67, "lootdrops.nim");
				setarmor_282507(item, user);
			}
			LA11: ;
		}
		LA9: ;
	}
	LA4: ;
	popFrame();
}

N_NIMCALL(NI, getitembonus_282523)(NI item) {
	NI result;
	nimfr("getItemBonus", "lootdrops.nim")
	result = 0;
	nimln(72, "lootdrops.nim");
	{
		if (!(item == ((NI) 0))) goto LA3;
		nimln(73, "lootdrops.nim");
		result = ((NI) 0);
	}
	goto LA1;
	LA3: ;
	{
		NimStringDesc* LOC6;
		TY167666 LOC7;
		NimStringDesc* LOC8;
		nimln(75, "lootdrops.nim");
		LOC6 = 0;
		LOC6 = sql_167021(((NimStringDesc*) &TMP2820));
		memset((void*)LOC7, 0, sizeof(LOC7));
		LOC7[0] = nimIntToStr(item);
		LOC8 = 0;
		LOC8 = getvalue_167577(db_282127, LOC6, LOC7, 1);
		result = nsuParseInt(LOC8);
	}
	LA1: ;
	popFrame();
	return result;
}

N_NIMCALL(NimStringDesc*, getitemname_282532)(NI item) {
	NimStringDesc* result;
	nimfr("getItemName", "lootdrops.nim")
	result = 0;
	nimln(78, "lootdrops.nim");
	{
		if (!(item == ((NI) 0))) goto LA3;
		nimln(79, "lootdrops.nim");
		result = copyString(((NimStringDesc*) &TMP2821));
	}
	goto LA1;
	LA3: ;
	{
		NimStringDesc* LOC6;
		TY167666 LOC7;
		nimln(81, "lootdrops.nim");
		LOC6 = 0;
		LOC6 = sql_167021(((NimStringDesc*) &TMP2822));
		memset((void*)LOC7, 0, sizeof(LOC7));
		LOC7[0] = nimIntToStr(item);
		result = getvalue_167577(db_282127, LOC6, LOC7, 1);
	}
	LA1: ;
	popFrame();
	return result;
}

N_NIMCALL(NI, getdefensebonus_282541)(NimStringDesc* user) {
	NI result;
	NI LOC1;
	NI LOC2;
	NI LOC3;
	NI LOC4;
	NI TMP2823;
	nimfr("getDefenseBonus", "lootdrops.nim")
	result = 0;
	nimln(84, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = getarmor_282431(user);
	LOC2 = 0;
	LOC2 = getitembonus_282523(LOC1);
	LOC3 = 0;
	LOC3 = getshield_282440(user);
	LOC4 = 0;
	LOC4 = getitembonus_282523(LOC3);
	TMP2823 = addInt(LOC2, LOC4);
	result = (NI)(TMP2823);
	popFrame();
	return result;
}

N_NIMCALL(NI, getattackbonus_282548)(NimStringDesc* user) {
	NI result;
	NI LOC1;
	nimfr("getAttackBonus", "lootdrops.nim")
	result = 0;
	nimln(87, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = getweapon_282422(user);
	result = getitembonus_282523(LOC1);
	popFrame();
	return result;
}

static N_INLINE(NI, randomint_277853)(Mtstate273035* rng, NI max) {
	NI result;
	NU LOC1;
	nimfr("randomInt", "common.nim")
	result = 0;
	nimln(102, "common.nim");
	nimln(103, "common.nim");
	LOC1 = 0;
	LOC1 = randomintimpl_277871(rng, ((NU) (max)));
	result = ((NI) (LOC1));
	popFrame();
	return result;
}

static N_INLINE(NI, chckRange)(NI i, NI a, NI b) {
	NI result;
{	result = 0;
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = (a <= i);
		if (!(LOC3)) goto LA4;
		LOC3 = (i <= b);
		LA4: ;
		if (!LOC3) goto LA5;
		result = i;
		goto BeforeRet;
	}
	goto LA1;
	LA5: ;
	{
		raiseRangeError(((NI64) (i)));
	}
	LA1: ;
	}BeforeRet: ;
	return result;
}

static N_INLINE(NI, randomint_279309)(Mtstate273035* rng, NI min, NI max) {
	NI result;
	NI TMP2828;
	NI LOC1;
	NI TMP2829;
	nimfr("randomInt", "common.nim")
	result = 0;
	nimln(106, "common.nim");
	nimln(107, "common.nim");
	TMP2828 = subInt(max, min);
	LOC1 = 0;
	LOC1 = randomint_277853(rng, ((NI)chckRange((NI)(TMP2828), ((NI) 1), ((NI) IL64(9223372036854775807)))));
	TMP2829 = addInt(min, ((NI) (LOC1)));
	result = (NI)(TMP2829);
	popFrame();
	return result;
}

static N_INLINE(NI, randomint_279271)(NI min, NI max) {
	NI result;
	nimfr("randomInt", "macros.nim")
	result = 0;
	nimln(404, "macros.nim");
	result = randomint_279309((&mersennetwisterinst_277010), min, max);
	popFrame();
	return result;
}

N_NIMCALL(NimStringDesc*, battleusers_282555)(NimStringDesc* user1, NimStringDesc* user2) {
	NimStringDesc* result;
	NimStringDesc* battleoutcome;
	NI user1dam;
	NI user2dam;
	NI user1def;
	NI user2def;
	NI user1att;
	NI user2att;
	NI user1att5;
	NI LOC1;
	NI TMP2824;
	NI user2att5;
	NI LOC2;
	NI TMP2825;
	NI Ac1;
	NI TMP2826;
	NI Ac2;
	NI TMP2827;
	nimfr("battleUsers", "lootdrops.nim")
	result = 0;
	battleoutcome = 0;
	user1dam = 0;
	user2dam = 0;
	nimln(94, "lootdrops.nim");
	user1def = getdefensebonus_282541(user1);
	nimln(95, "lootdrops.nim");
	user2def = getdefensebonus_282541(user2);
	nimln(97, "lootdrops.nim");
	user1att = getattackbonus_282548(user1);
	nimln(98, "lootdrops.nim");
	user2att = getattackbonus_282548(user2);
	nimln(100, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = getattackbonus_282548(user1);
	TMP2824 = addInt(LOC1, ((NI) 5));
	user1att5 = (NI)(TMP2824);
	nimln(101, "lootdrops.nim");
	LOC2 = 0;
	LOC2 = getattackbonus_282548(user2);
	TMP2825 = addInt(LOC2, ((NI) 5));
	user2att5 = (NI)(TMP2825);
	nimln(103, "lootdrops.nim");
	TMP2826 = addInt(((NI) 10), user2def);
	Ac1 = (NI)(TMP2826);
	nimln(104, "lootdrops.nim");
	TMP2827 = addInt(((NI) 10), user1def);
	Ac2 = (NI)(TMP2827);
	nimln(106, "lootdrops.nim");
	battleoutcome = copyString(((NimStringDesc*) &TMP2762));
	nimln(108, "lootdrops.nim");
	{
		NI TMP2830;
		NI LOC5;
		NimStringDesc* LOC8;
		NimStringDesc* LOC9;
		TMP2830 = addInt(((NI) 21), user1att);
		LOC5 = 0;
		LOC5 = randomint_279271(((NI) 1), (NI)(TMP2830));
		if (!(Ac1 < LOC5)) goto LA6;
		nimln(109, "lootdrops.nim");
		user1dam = randomint_279271(((NI) 1), user1att5);
		nimln(110, "lootdrops.nim");
		LOC8 = 0;
		LOC9 = 0;
		LOC9 = nimIntToStr(user1dam);
		LOC8 = rawNewString(user1->Sup.len + user2->Sup.len + LOC9->Sup.len + 23);
appendString(LOC8, user1);
appendString(LOC8, ((NimStringDesc*) &TMP2831));
appendString(LOC8, user2);
appendString(LOC8, ((NimStringDesc*) &TMP2832));
appendString(LOC8, LOC9);
appendString(LOC8, ((NimStringDesc*) &TMP2833));
		battleoutcome = LOC8;
	}
	goto LA3;
	LA6: ;
	{
		nimln(112, "lootdrops.nim");
		user1dam = ((NI) 0);
	}
	LA3: ;
	nimln(114, "lootdrops.nim");
	{
		NI TMP2834;
		NI LOC13;
		NimStringDesc* LOC16;
		NimStringDesc* LOC17;
		TMP2834 = addInt(((NI) 21), user2att);
		LOC13 = 0;
		LOC13 = randomint_279271(((NI) 1), (NI)(TMP2834));
		if (!(Ac2 < LOC13)) goto LA14;
		nimln(115, "lootdrops.nim");
		user2dam = randomint_279271(((NI) 1), user2att5);
		nimln(116, "lootdrops.nim");
		LOC16 = 0;
		LOC17 = 0;
		LOC17 = nimIntToStr(user2dam);
		LOC16 = rawNewString(battleoutcome->Sup.len + user2->Sup.len + user1->Sup.len + LOC17->Sup.len + 24);
appendString(LOC16, battleoutcome);
appendString(LOC16, ((NimStringDesc*) &TMP2784));
appendString(LOC16, user2);
appendString(LOC16, ((NimStringDesc*) &TMP2831));
appendString(LOC16, user1);
appendString(LOC16, ((NimStringDesc*) &TMP2832));
appendString(LOC16, LOC17);
appendString(LOC16, ((NimStringDesc*) &TMP2833));
		battleoutcome = LOC16;
	}
	goto LA11;
	LA14: ;
	{
		nimln(118, "lootdrops.nim");
		user2dam = ((NI) 0);
	}
	LA11: ;
	nimln(120, "lootdrops.nim");
	{
		NimStringDesc* LOC23;
		if (!(user2dam == user1dam)) goto LA21;
		nimln(121, "lootdrops.nim");
		LOC23 = 0;
		LOC23 = rawNewString(battleoutcome->Sup.len + 31);
appendString(LOC23, battleoutcome);
appendString(LOC23, ((NimStringDesc*) &TMP2835));
		battleoutcome = LOC23;
	}
	goto LA19;
	LA21: ;
	{
		NimStringDesc* LOC27;
		NI LOC28;
		NI LOC29;
		nimln(122, "lootdrops.nim");
		if (!(user1dam < user2dam)) goto LA25;
		nimln(123, "lootdrops.nim");
		LOC27 = 0;
		LOC27 = rawNewString(battleoutcome->Sup.len + user2->Sup.len + 52);
appendString(LOC27, battleoutcome);
appendString(LOC27, ((NimStringDesc*) &TMP2784));
appendString(LOC27, user2);
appendString(LOC27, ((NimStringDesc*) &TMP2836));
		battleoutcome = LOC27;
		nimln(124, "lootdrops.nim");
		LOC28 = 0;
		LOC28 = downvote_282375(user1);
		nimln(125, "lootdrops.nim");
		LOC29 = 0;
		LOC29 = upvote_282363(user2);
	}
	goto LA19;
	LA25: ;
	{
		NimStringDesc* LOC33;
		NI LOC34;
		NI LOC35;
		nimln(126, "lootdrops.nim");
		if (!(user2dam < user1dam)) goto LA31;
		nimln(127, "lootdrops.nim");
		LOC33 = 0;
		LOC33 = rawNewString(battleoutcome->Sup.len + user1->Sup.len + 52);
appendString(LOC33, battleoutcome);
appendString(LOC33, ((NimStringDesc*) &TMP2784));
appendString(LOC33, user1);
appendString(LOC33, ((NimStringDesc*) &TMP2836));
		battleoutcome = LOC33;
		nimln(128, "lootdrops.nim");
		LOC34 = 0;
		LOC34 = downvote_282375(user2);
		nimln(129, "lootdrops.nim");
		LOC35 = 0;
		LOC35 = upvote_282363(user1);
	}
	goto LA19;
	LA31: ;
	LA19: ;
	nimln(131, "lootdrops.nim");
	result = copyString(battleoutcome);
	popFrame();
	return result;
}

N_NIMCALL(NIM_BOOL, doesusergetdrop_282673)(NimStringDesc* msg, NimStringDesc* user) {
	NIM_BOOL result;
	nimfr("doesUserGetDrop", "lootdrops.nim")
{	result = 0;
	nimln(135, "lootdrops.nim");
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = checkblacklist_282192(user);
		if (!LOC3) goto LA4;
		nimln(136, "lootdrops.nim");
		result = NIM_FALSE;
		goto BeforeRet;
	}
	LA4: ;
	nimln(138, "lootdrops.nim");
	{
		NI LOC8;
		LOC8 = 0;
		LOC8 = randomint_279271(((NI) 1), ((NI) 200));
		if (!(LOC8 == ((NI) 1))) goto LA9;
		nimln(139, "lootdrops.nim");
		result = NIM_TRUE;
	}
	goto LA6;
	LA9: ;
	{
		nimln(141, "lootdrops.nim");
		result = NIM_FALSE;
	}
	LA6: ;
	}BeforeRet: ;
	popFrame();
	return result;
}

N_NIMCALL(NI, generatelootdrop_282706)(NimStringDesc* user, NIM_BOOL rare) {
	NI result;
	NI rank;
	TY167494* rows;
	NimStringDesc* LOC6;
	TY167666 LOC7;
	NimStringDesc* randomitem;
	NI LOC8;
	nimfr("generateLootDrop", "lootdrops.nim")
	result = 0;
	rank = 0;
	nimln(146, "lootdrops.nim");
	{
		if (!rare) goto LA3;
		nimln(147, "lootdrops.nim");
		rank = randomint_279271(((NI) 1), ((NI) 4));
	}
	goto LA1;
	LA3: ;
	{
		nimln(149, "lootdrops.nim");
		rank = ((NI) 1);
	}
	LA1: ;
	nimln(151, "lootdrops.nim");
	LOC6 = 0;
	LOC6 = sql_167021(((NimStringDesc*) &TMP2837));
	memset((void*)LOC7, 0, sizeof(LOC7));
	LOC7[0] = nimIntToStr(rank);
	rows = getallrows_167488(db_282127, LOC6, LOC7, 1);
	nimln(153, "lootdrops.nim");
	LOC8 = 0;
	LOC8 = randomint_279271(((NI) 0), (rows ? (rows->Sup.len-1) : -1));
	if ((NU)(LOC8) >= (NU)(rows->Sup.len)) raiseIndexError();
	if ((NU)(((NI) 0)) >= (NU)(rows->data[LOC8]->Sup.len)) raiseIndexError();
	randomitem = rows->data[LOC8]->data[((NI) 0)];
	nimln(154, "lootdrops.nim");
	result = nsuParseInt(randomitem);
	popFrame();
	return result;
}

N_NIMCALL(NIM_BOOL, adduserloot_282768)(NI user, NI item) {
	NIM_BOOL result;
	NimStringDesc* LOC1;
	TY282228 LOC2;
	nimfr("addUserLoot", "lootdrops.nim")
	result = 0;
	nimln(157, "lootdrops.nim");
	LOC1 = 0;
	LOC1 = sql_167021(((NimStringDesc*) &TMP2838));
	memset((void*)LOC2, 0, sizeof(LOC2));
	nimln(159, "lootdrops.nim");
	LOC2[0] = nimIntToStr(item);
	LOC2[1] = nimIntToStr(user);
	result = tryexec_167138(db_282127, LOC1, LOC2, 2);
	popFrame();
	return result;
}

static N_INLINE(void, writeln_282786)(FILE* f, NimStringDesc** x, NI xLen0) {
	nimfr("writeln", "sysio.nim")
	{
		NimStringDesc* i_282802;
		NI i_282810;
		i_282802 = 0;
		nimln(1689, "system.nim");
		i_282810 = ((NI) 0);
		{
			nimln(1690, "system.nim");
			while (1) {
				if (!(i_282810 < xLen0)) goto LA3;
				nimln(1691, "system.nim");
				i_282802 = x[i_282810];
				nimln(212, "sysio.nim");
				write_13457(f, i_282802);
				nimln(1692, "system.nim");
				i_282810 += ((NI) 1);
			} LA3: ;
		}
	}
	nimln(213, "sysio.nim");
	write_13457(f, ((NimStringDesc*) &TMP2839));
	popFrame();
}

static N_INLINE(void, initStackBottomWith)(void* locals) {
	setStackBottom(locals);
}
void PreMainInner() {
	systemInit();
	stdlib_parseutilsDatInit();
	stdlib_strutilsDatInit();
	stdlib_winleanDatInit();
	stdlib_timesDatInit();
	stdlib_osDatInit();
	stdlib_parseopt2DatInit();
	stdlib_unsignedDatInit();
	stdlib_socketsDatInit();
	stdlib_hashesDatInit();
	stdlib_strtabsDatInit();
	stdlib_streamsDatInit();
	stdlib_cpuinfoDatInit();
	stdlib_osprocDatInit();
	stdlib_sqlite3DatInit();
	stdlib_db_sqliteDatInit();
	stdlib_lexbaseDatInit();
	stdlib_unicodeDatInit();
	stdlib_macrosDatInit();
	stdlib_jsonDatInit();
	stdlib_typeinfoDatInit();
	stdlib_mathDatInit();
	stdlib_intsetsDatInit();
	stdlib_tablesDatInit();
	stdlib_marshalDatInit();
	stdlib_parsexmlDatInit();
	stdlib_rawsocketsDatInit();
	stdlib_netDatInit();
	stdlib_uriDatInit();
	stdlib_base64DatInit();
	stdlib_mimetypesDatInit();
	stdlib_endiansDatInit();
	stdlib_oidsDatInit();
	stdlib_setsDatInit();
	stdlib_asyncdispatchDatInit();
	stdlib_asyncnetDatInit();
	stdlib_httpclientDatInit();
	random_utilDatInit();
	random_random_realDatInit();
	random_commonDatInit();
	random_mt19937arDatInit();
	random_mersenneDatInit();
	random_urandomDatInit();
	random_randomDatInit();
	stdlib_sequtilsDatInit();
	nimbusDatInit();
	stdlib_parseutilsInit();
	stdlib_strutilsInit();
	stdlib_winleanInit();
	stdlib_timesInit();
	stdlib_osInit();
	stdlib_parseopt2Init();
	stdlib_unsignedInit();
	stdlib_socketsInit();
	stdlib_hashesInit();
	stdlib_strtabsInit();
	stdlib_streamsInit();
	stdlib_cpuinfoInit();
	stdlib_osprocInit();
	stdlib_sqlite3Init();
	stdlib_db_sqliteInit();
	stdlib_lexbaseInit();
	stdlib_unicodeInit();
	stdlib_macrosInit();
	stdlib_jsonInit();
	stdlib_typeinfoInit();
	stdlib_mathInit();
	stdlib_intsetsInit();
	stdlib_tablesInit();
	stdlib_marshalInit();
	stdlib_parsexmlInit();
	stdlib_rawsocketsInit();
	stdlib_netInit();
	stdlib_uriInit();
	stdlib_base64Init();
	stdlib_mimetypesInit();
	stdlib_endiansInit();
	stdlib_oidsInit();
	stdlib_setsInit();
	stdlib_asyncdispatchInit();
	stdlib_asyncnetInit();
	stdlib_httpclientInit();
	random_utilInit();
	random_random_realInit();
	random_commonInit();
	random_mt19937arInit();
	random_mersenneInit();
	random_urandomInit();
	random_randomInit();
	stdlib_sequtilsInit();
}

void PreMain() {
	void (*volatile inner)();
	systemDatInit();
	inner = PreMainInner;
	initStackBottomWith((void *)&inner);
	(*inner)();
}

int cmdCount;
char** cmdLine;
char** gEnv;
N_CDECL(void, NimMainInner)(void) {
	nimbusInit();
}

N_CDECL(void, NimMain)(void) {
	void (*volatile inner)();
	PreMain();
	inner = NimMainInner;
	initStackBottomWith((void *)&inner);
	(*inner)();
}

int main(int argc, char** args, char** env) {
	cmdLine = args;
	cmdCount = argc;
	gEnv = env;
	NimMain();
	return nim_program_result;
}

NIM_EXTERNC N_NOINLINE(void, nimbusInit)(void) {
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	NimStringDesc* LOC3;
	NimStringDesc* LOC4;
	NimStringDesc* LOC5;
	TY161637 LOC6;
	NimStringDesc* LOC7;
	TY161637 LOC8;
	NimStringDesc* LOC9;
	TY161637 LOC10;
	NimStringDesc* LOC11;
	NimStringDesc* LOC12;
	NimStringDesc* LOC13;
	nimfr("nimbus", "nimbus.nim")
	nimln(32, "usersystem.nim");
	LOC1 = 0;
	LOC1 = server_282087; server_282087 = copyStringRC1(((NimStringDesc*) &TMP2760));
	if (LOC1) nimGCunrefNoCycle(LOC1);
	nimln(33, "usersystem.nim");
	genericSeqAssign((&loggedin_282102), TMP2761, (&NTI13606));
	nimln(34, "usersystem.nim");
	port_282104 = ((NU16) 6667);
	nimln(35, "usersystem.nim");
	LOC2 = 0;
	LOC2 = username_282105; username_282105 = copyStringRC1(((NimStringDesc*) &TMP2764));
	if (LOC2) nimGCunrefNoCycle(LOC2);
	nimln(36, "usersystem.nim");
	LOC3 = 0;
	LOC3 = nick_282106; nick_282106 = copyStringRC1(((NimStringDesc*) &TMP2765));
	if (LOC3) nimGCunrefNoCycle(LOC3);
	nimln(37, "usersystem.nim");
	genericSeqAssign((&channels_282121), TMP2766, (&NTI13606));
	nimln(39, "usersystem.nim");
	islogging_282123 = NIM_FALSE;
	nimln(40, "usersystem.nim");
	outputting_282124 = NIM_TRUE;
	nimln(42, "usersystem.nim");
	asgnRefNoCycle((void**) (&sock_282125), socket_137604(((NU8) 2), ((NU8) 1), ((NU8) 6), NIM_TRUE));
	nimln(43, "usersystem.nim");
	LOC4 = 0;
	LOC4 = buffer_282126; buffer_282126 = copyStringRC1(((NimStringDesc*) &TMP2762));
	if (LOC4) nimGCunrefNoCycle(LOC4);
	nimln(47, "usersystem.nim");
	db_282127 = open_167645(((NimStringDesc*) &TMP2773), ((NimStringDesc*) &TMP2774), ((NimStringDesc*) &TMP2762), ((NimStringDesc*) &TMP2775));
	nimln(50, "usersystem.nim");
	LOC5 = 0;
	LOC5 = sql_167021(((NimStringDesc*) &TMP2776));
	memset((void*)LOC6, 0, sizeof(LOC6));
	exec_167155(db_282127, LOC5, LOC6, 0);
	nimln(56, "usersystem.nim");
	LOC7 = 0;
	LOC7 = sql_167021(((NimStringDesc*) &TMP2777));
	memset((void*)LOC8, 0, sizeof(LOC8));
	exec_167155(db_282127, LOC7, LOC8, 0);
	nimln(67, "usersystem.nim");
	LOC9 = 0;
	LOC9 = sql_167021(((NimStringDesc*) &TMP2778));
	memset((void*)LOC10, 0, sizeof(LOC10));
	exec_167155(db_282127, LOC9, LOC10, 0);
	nimln(76, "usersystem.nim");
	connect_142083(sock_282125, server_282087, port_282104, ((NU8) 2));
	nimln(78, "usersystem.nim");
	LOC11 = 0;
	LOC11 = rawNewString(nick_282106->Sup.len + 8);
appendString(LOC11, ((NimStringDesc*) &TMP2781));
appendString(LOC11, nick_282106);
appendString(LOC11, ((NimStringDesc*) &TMP2782));
	send_146407(sock_282125, LOC11);
	nimln(79, "usersystem.nim");
	LOC12 = 0;
	LOC12 = rawNewString(nick_282106->Sup.len + nick_282106->Sup.len + nick_282106->Sup.len + 20);
appendString(LOC12, ((NimStringDesc*) &TMP2783));
appendString(LOC12, nick_282106);
appendString(LOC12, ((NimStringDesc*) &TMP2784));
appendString(LOC12, nick_282106);
appendString(LOC12, ((NimStringDesc*) &TMP2784));
appendString(LOC12, nick_282106);
appendString(LOC12, ((NimStringDesc*) &TMP2785));
	send_146407(sock_282125, LOC12);
	nimln(80, "usersystem.nim");
	LOC13 = 0;
	LOC13 = rawNewString(nick_282106->Sup.len + 11);
appendString(LOC13, ((NimStringDesc*) &TMP2786));
appendString(LOC13, nick_282106);
appendString(LOC13, ((NimStringDesc*) &TMP2787));
	send_146407(sock_282125, LOC13);
	{
		nimln(14, "nimbus.nim");
		while (1) {
			nimln(15, "nimbus.nim");
			readline_145045(sock_282125, (&buffer_282126), ((NI) -1));
			nimln(17, "nimbus.nim");
			{
				TY167666 LOC20;
				if (!islogging_282123) goto LA18;
				nimln(18, "nimbus.nim");
				memset((void*)LOC20, 0, sizeof(LOC20));
				LOC20[0] = copyString(buffer_282126);
				writeln_282786(log_282122, LOC20, 1);
			}
			LA18: ;
			nimln(20, "nimbus.nim");
			{
				if (!outputting_282124) goto LA23;
				nimln(21, "nimbus.nim");
				printf("%s\015\012", buffer_282126? (buffer_282126)->data:"nil");
			}
			LA23: ;
			nimln(23, "nimbus.nim");
			{
				NimStringDesc* LOC27;
				LOC27 = 0;
				LOC27 = rawNewString(nick_282106->Sup.len + nick_282106->Sup.len + 11);
appendString(LOC27, ((NimStringDesc*) &TMP2870));
appendString(LOC27, nick_282106);
appendString(LOC27, ((NimStringDesc*) &TMP2871));
appendString(LOC27, nick_282106);
appendString(LOC27, ((NimStringDesc*) &TMP2872));
				if (!eqStrings(buffer_282126, LOC27)) goto LA28;
				nimln(24, "nimbus.nim");
				goto LA14;
			}
			LA28: ;
		}
	} LA14: ;
	{
		NI i_282848;
		NI L_282850;
		nimln(3084, "system.nim");
		i_282848 = ((NI) 0);
		nimln(3085, "system.nim");
		L_282850 = (channels_282121 ? channels_282121->Sup.len : 0);
		{
			nimln(3086, "system.nim");
			while (1) {
				NimStringDesc* LOC33;
				NimStringDesc* LOC34;
				NI TMP2874;
				if (!(i_282848 < L_282850)) goto LA32;
				nimln(3087, "system.nim");
				if ((NU)(i_282848) >= (NU)(channels_282121->Sup.len)) raiseIndexError();
				LOC33 = 0;
				LOC33 = channel_282844; channel_282844 = copyStringRC1(channels_282121->data[i_282848]);
				if (LOC33) nimGCunrefNoCycle(LOC33);
				nimln(27, "nimbus.nim");
				LOC34 = 0;
				LOC34 = rawNewString(channel_282844->Sup.len + 8);
appendString(LOC34, ((NimStringDesc*) &TMP2873));
appendString(LOC34, channel_282844);
appendString(LOC34, ((NimStringDesc*) &TMP2782));
				send_146407(sock_282125, LOC34);
				nimln(3088, "system.nim");
				TMP2874 = addInt(i_282848, ((NI) 1));
				i_282848 = (NI)(TMP2874);
				nimln(3089, "system.nim");
				{
					if (!!(((channels_282121 ? channels_282121->Sup.len : 0) == L_282850))) goto LA37;
					failedassertimpl_88817(((NimStringDesc*) &TMP2875));
				}
				LA37: ;
			} LA32: ;
		}
	}
	{
		nimln(29, "nimbus.nim");
		while (1) {
			TY13606* ircmsg;
			nimln(30, "nimbus.nim");
			readline_145045(sock_282125, (&buffer_282126), ((NI) -1));
			nimln(32, "nimbus.nim");
			{
				if (!((buffer_282126) && (buffer_282126)->Sup.len == 0)) goto LA43;
				nimln(33, "nimbus.nim");
				printf("%s\015\012", ((NimStringDesc*) &TMP2879)? (((NimStringDesc*) &TMP2879))->data:"nil");
				nimln(34, "nimbus.nim");
				goto LA39;
			}
			LA43: ;
			nimln(36, "nimbus.nim");
			{
				TY167666 LOC49;
				if (!islogging_282123) goto LA47;
				nimln(37, "nimbus.nim");
				memset((void*)LOC49, 0, sizeof(LOC49));
				LOC49[0] = copyString(buffer_282126);
				writeln_282786(log_282122, LOC49, 1);
			}
			LA47: ;
			nimln(39, "nimbus.nim");
			ircmsg = nsuSplitString(buffer_282126, ((NimStringDesc*) &TMP2784));
			nimln(41, "nimbus.nim");
			{
				NimStringDesc* LOC54;
				if (!outputting_282124) goto LA52;
				nimln(42, "nimbus.nim");
				LOC54 = 0;
				LOC54 = HEX24_282880(ircmsg);
				printf("%s\015\012", LOC54? (LOC54)->data:"nil");
			}
			LA52: ;
			nimln(44, "nimbus.nim");
			{
				NimStringDesc* LOC59;
				if ((NU)(((NI) 0)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
				if (!eqStrings(ircmsg->data[((NI) 0)], ((NimStringDesc*) &TMP2884))) goto LA57;
				nimln(45, "nimbus.nim");
				LOC59 = 0;
				if ((NU)(((NI) 1)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
				LOC59 = rawNewString(ircmsg->data[((NI) 1)]->Sup.len + 8);
appendString(LOC59, ((NimStringDesc*) &TMP2885));
appendString(LOC59, ircmsg->data[((NI) 1)]);
appendString(LOC59, ((NimStringDesc*) &TMP2782));
				send_146407(sock_282125, LOC59);
			}
			goto LA55;
			LA57: ;
			{
				NimStringDesc* nick;
				nimln(47, "nimbus.nim");
				if ((NU)(((NI) 1)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
				if (!eqStrings(ircmsg->data[((NI) 1)], ((NimStringDesc*) &TMP2886))) goto LA61;
				nimln(48, "nimbus.nim");
				if ((NU)(((NI) 0)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
				nick = getnick_282070(ircmsg->data[((NI) 0)]);
				nimln(49, "nimbus.nim");
				{
					NIM_BOOL LOC65;
					NIM_BOOL LOC68;
					LOC65 = 0;
					LOC65 = isloggedin_282144(nick);
					if (!LOC65) goto LA66;
					nimln(50, "nimbus.nim");
					LOC68 = 0;
					LOC68 = logoutuser_282255(nick);
				}
				LA66: ;
			}
			goto LA55;
			LA61: ;
			{
				NimStringDesc* nick;
				nimln(52, "nimbus.nim");
				if ((NU)(((NI) 1)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
				if (!eqStrings(ircmsg->data[((NI) 1)], ((NimStringDesc*) &TMP2887))) goto LA70;
				nimln(53, "nimbus.nim");
				if ((NU)(((NI) 0)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
				nick = getnick_282070(ircmsg->data[((NI) 0)]);
				nimln(57, "nimbus.nim");
				{
					NimStringDesc* LOC76;
					NimStringDesc* LOC77;
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2888))) goto LA74;
					nimln(58, "nimbus.nim");
					LOC76 = 0;
					if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					LOC77 = 0;
					LOC77 = about_282007();
					LOC76 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + LOC77->Sup.len + 13);
appendString(LOC76, ((NimStringDesc*) &TMP2889));
appendString(LOC76, ircmsg->data[((NI) 2)]);
appendString(LOC76, ((NimStringDesc*) &TMP2890));
appendString(LOC76, LOC77);
appendString(LOC76, ((NimStringDesc*) &TMP2782));
					send_146407(sock_282125, LOC76);
				}
				LA74: ;
				nimln(61, "nimbus.nim");
				{
					NIM_BOOL LOC80;
					NIM_BOOL LOC81;
					NimStringDesc* LOC84;
					NimStringDesc* filename;
					FILE* outhandle;
					NimStringDesc* result;
					TY164210 resultinitial;
					NimStringDesc* LOC103;
					NimStringDesc* LOC117;
					LOC80 = 0;
					LOC81 = 0;
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					LOC81 = eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2891));
					if (!(LOC81)) goto LA82;
					LOC81 = isloggedin_282144(((NimStringDesc*) &TMP2892));
					LA82: ;
					LOC80 = LOC81;
					if (!(LOC80)) goto LA83;
					LOC84 = 0;
					LOC84 = nsuToLowerStr(nick);
					LOC80 = eqStrings(LOC84, ((NimStringDesc*) &TMP2893));
					LA83: ;
					if (!LOC80) goto LA85;
					nimln(62, "nimbus.nim");
					filename = copyString(((NimStringDesc*) &TMP2894));
					nimln(63, "nimbus.nim");
					outhandle = open_13217(filename, ((NU8) 1), ((NI) -1));
					result = 0;
					nimln(66, "nimbus.nim");
					writeln_282786(outhandle, TMP2895, 1);
					{
						NimStringDesc* HEX3Atmp_283281;
						Slice88061 LOC88;
						TY13606* LOC89;
						NI last_283285;
						asgnRefNoCycle((void**) (&line_282971), NIM_NIL);
						HEX3Atmp_283281 = 0;
						nimln(67, "nimbus.nim");
						LOC88 = HEX2EHEX2E_110273(((NI) 4), (ircmsg ? (ircmsg->Sup.len-1) : -1));
						LOC89 = 0;
						LOC89 = HEX5BHEX5D_133598(ircmsg, LOC88);
						HEX3Atmp_283281 = nsuJoinSep(LOC89->data, LOC89->Sup.len, ((NimStringDesc*) &TMP2784));
						nimln(293, "strutils.nim");
						last_283285 = ((NI) 0);
						nimln(294, "strutils.nim");
						{
							if (!(((NI) 0) < (HEX3Atmp_283281 ? HEX3Atmp_283281->Sup.len : 0))) goto LA92;
							{
								nimln(295, "strutils.nim");
								while (1) {
									NI first_283287;
									NI TMP2900;
									TY167666 LOC101;
									NimStringDesc* LOC102;
									NI TMP2901;
									if (!(last_283285 <= (HEX3Atmp_283281 ? HEX3Atmp_283281->Sup.len : 0))) goto LA95;
									nimln(296, "strutils.nim");
									first_283287 = last_283285;
									{
										nimln(297, "strutils.nim");
										while (1) {
											NIM_BOOL LOC98;
											NI TMP2897;
											NimStringDesc* LOC100;
											NI TMP2899;
											LOC98 = 0;
											LOC98 = (last_283285 < (HEX3Atmp_283281 ? HEX3Atmp_283281->Sup.len : 0));
											if (!(LOC98)) goto LA99;
											TMP2897 = addInt(last_283285, ((NI) 0));
											LOC100 = 0;
											LOC100 = copyStrLast(HEX3Atmp_283281, last_283285, (NI)(TMP2897));
											LOC98 = !(eqStrings(LOC100, ((NimStringDesc*) &TMP2898)));
											LA99: ;
											if (!LOC98) goto LA97;
											nimln(298, "strutils.nim");
											TMP2899 = addInt(last_283285, ((NI) 1));
											last_283285 = (NI)(TMP2899);
										} LA97: ;
									}
									nimln(299, "strutils.nim");
									TMP2900 = subInt(last_283285, ((NI) 1));
									asgnRefNoCycle((void**) (&line_282971), copyStrLast(HEX3Atmp_283281, first_283287, (NI)(TMP2900)));
									nimln(68, "nimbus.nim");
									memset((void*)LOC101, 0, sizeof(LOC101));
									LOC102 = 0;
									LOC102 = rawNewString(line_282971->Sup.len + 1);
appendString(LOC102, ((NimStringDesc*) &TMP2784));
appendString(LOC102, line_282971);
									LOC101[0] = LOC102;
									writeln_282786(outhandle, LOC101, 1);
									nimln(300, "strutils.nim");
									TMP2901 = addInt(last_283285, ((NI) 1));
									last_283285 = (NI)(TMP2901);
								} LA95: ;
							}
						}
						LA92: ;
					}
					nimln(69, "nimbus.nim");
					writeln_282786(outhandle, TMP2902, 1);
					nimln(70, "nimbus.nim");
					writeln_282786(outhandle, TMP2904, 1);
					nimln(71, "nimbus.nim");
					fclose(outhandle);
					memset((void*)(&resultinitial), 0, sizeof(resultinitial));
					nimln(73, "nimbus.nim");
					LOC103 = 0;
					LOC103 = rawNewString(filename->Sup.len + 276);
appendString(LOC103, ((NimStringDesc*) &TMP2906));
appendString(LOC103, filename);
					chckNil((void*)(&resultinitial));
					memset((void*)(&resultinitial), 0, sizeof(resultinitial));
					execcmdex_164204(LOC103, 10, (&resultinitial));
					nimln(75, "nimbus.nim");
					{
						TY164210 resultsecond;
						NimStringDesc* LOC108;
						NI TMP2908;
						NI TMP2909;
						Slice88061 LOC109;
						NimStringDesc* LOC110;
						if (!((resultinitial.Field0) && (resultinitial.Field0)->Sup.len == 0)) goto LA106;
						memset((void*)(&resultsecond), 0, sizeof(resultsecond));
						nimln(76, "nimbus.nim");
						LOC108 = 0;
						TMP2908 = subInt((filename ? filename->Sup.len : 0), ((NI) 4));
						TMP2909 = subInt((NI)(TMP2908), ((NI) 1));
						LOC109 = HEX2EHEX2E_110273(((NI) 0), (NI)(TMP2909));
						LOC110 = 0;
						LOC110 = HEX5BHEX5D_88054(filename, LOC109);
						LOC108 = rawNewString(LOC110->Sup.len + 2);
appendString(LOC108, ((NimStringDesc*) &TMP2907));
appendString(LOC108, LOC110);
						chckNil((void*)(&resultsecond));
						memset((void*)(&resultsecond), 0, sizeof(resultsecond));
						execcmdex_164204(LOC108, 10, (&resultsecond));
						nimln(78, "nimbus.nim");
						{
							if (!((resultsecond.Field0) && (resultsecond.Field0)->Sup.len == 0)) goto LA113;
							nimln(79, "nimbus.nim");
							result = copyString(((NimStringDesc*) &TMP2910));
						}
						goto LA111;
						LA113: ;
						{
							nimln(82, "nimbus.nim");
							result = copyString(resultsecond.Field0);
						}
						LA111: ;
					}
					goto LA104;
					LA106: ;
					{
						nimln(85, "nimbus.nim");
						result = copyString(resultinitial.Field0);
					}
					LA104: ;
					nimln(87, "nimbus.nim");
					LOC117 = 0;
					if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					LOC117 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + nick->Sup.len + result->Sup.len + 15);
appendString(LOC117, ((NimStringDesc*) &TMP2889));
appendString(LOC117, ircmsg->data[((NI) 2)]);
appendString(LOC117, ((NimStringDesc*) &TMP2890));
appendString(LOC117, nick);
appendString(LOC117, ((NimStringDesc*) &TMP2911));
appendString(LOC117, result);
appendString(LOC117, ((NimStringDesc*) &TMP2782));
					send_146407(sock_282125, LOC117);
				}
				LA85: ;
				nimln(89, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2912))) goto LA120;
					nimln(90, "nimbus.nim");
					{
						NimStringDesc* LOC126;
						if (!((ircmsg ? (ircmsg->Sup.len-1) : -1) < ((NI) 4))) goto LA124;
						nimln(91, "nimbus.nim");
						LOC126 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC126 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + 41);
appendString(LOC126, ((NimStringDesc*) &TMP2889));
appendString(LOC126, ircmsg->data[((NI) 2)]);
appendString(LOC126, ((NimStringDesc*) &TMP2913));
						send_146407(sock_282125, LOC126);
					}
					goto LA122;
					LA124: ;
					{
						NimStringDesc* formula;
						TY13606* formula2;
						TSafePoint TMP2915;
						nimln(93, "nimbus.nim");
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						formula = copyString(ircmsg->data[((NI) 4)]);
						nimln(94, "nimbus.nim");
						formula2 = nsuSplitCharSet(formula, TMP2914);
						nimln(95, "nimbus.nim");
						pushSafePoint(&TMP2915);
						TMP2915.status = setjmp(TMP2915.context);
						if (TMP2915.status == 0) {
							NI volatile diceresult;
							diceresult = 0;
							nimln(97, "nimbus.nim");
							diceresult = ((NI) 0);
							nimln(98, "nimbus.nim");
							{
								NI LOC131;
								NimStringDesc* LOC134;
								if ((NU)(((NI) 0)) >= (NU)(formula2->Sup.len)) raiseIndexError();
								LOC131 = 0;
								LOC131 = nsuParseInt(formula2->data[((NI) 0)]);
								if (!(((NI) 200) < LOC131)) goto LA132;
								nimln(99, "nimbus.nim");
								LOC134 = 0;
								if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
								LOC134 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + 68);
appendString(LOC134, ((NimStringDesc*) &TMP2889));
appendString(LOC134, ircmsg->data[((NI) 2)]);
appendString(LOC134, ((NimStringDesc*) &TMP2916));
								send_146407(sock_282125, LOC134);
							}
							goto LA129;
							LA132: ;
							{
								NimStringDesc* LOC141;
								NimStringDesc* LOC142;
								{
									NI HEX3Atmp_283290;
									NI res_283293;
									i_283037 = 0;
									HEX3Atmp_283290 = 0;
									nimln(101, "nimbus.nim");
									if ((NU)(((NI) 0)) >= (NU)(formula2->Sup.len)) raiseIndexError();
									HEX3Atmp_283290 = nsuParseInt(formula2->data[((NI) 0)]);
									nimln(1598, "system.nim");
									res_283293 = ((NI) 1);
									{
										nimln(1599, "system.nim");
										while (1) {
											NI LOC139;
											NI TMP2917;
											NI LOC140;
											NI TMP2918;
											NI TMP2919;
											if (!(res_283293 <= HEX3Atmp_283290)) goto LA138;
											nimln(1600, "system.nim");
											i_283037 = res_283293;
											nimln(102, "nimbus.nim");
											if ((NU)(((NI) 1)) >= (NU)(formula2->Sup.len)) raiseIndexError();
											LOC139 = 0;
											LOC139 = nsuParseInt(formula2->data[((NI) 1)]);
											TMP2917 = addInt(LOC139, ((NI) 1));
											LOC140 = 0;
											LOC140 = randomint_279271(((NI) 1), (NI)(TMP2917));
											TMP2918 = addInt(diceresult, LOC140);
											diceresult = (NI)(TMP2918);
											nimln(1614, "system.nim");
											TMP2919 = addInt(res_283293, ((NI) 1));
											res_283293 = (NI)(TMP2919);
										} LA138: ;
									}
								}
								nimln(103, "nimbus.nim");
								LOC141 = 0;
								if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
								LOC142 = 0;
								LOC142 = nimIntToStr(diceresult);
								LOC141 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + nick->Sup.len + LOC142->Sup.len + 25);
appendString(LOC141, ((NimStringDesc*) &TMP2889));
appendString(LOC141, ircmsg->data[((NI) 2)]);
appendString(LOC141, ((NimStringDesc*) &TMP2890));
appendString(LOC141, nick);
appendString(LOC141, ((NimStringDesc*) &TMP2920));
appendString(LOC141, LOC142);
appendString(LOC141, ((NimStringDesc*) &TMP2921));
								send_146407(sock_282125, LOC141);
							}
							LA129: ;
							popSafePoint();
						}
						else {
							popSafePoint();
							setFrame((TFrame*)&FR);
							{
								NimStringDesc* LOC145;
								TMP2915.status = 0;
								nimln(105, "nimbus.nim");
								LOC145 = 0;
								if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
								LOC145 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + 62);
appendString(LOC145, ((NimStringDesc*) &TMP2889));
appendString(LOC145, ircmsg->data[((NI) 2)]);
appendString(LOC145, ((NimStringDesc*) &TMP2922));
								send_146407(sock_282125, LOC145);
								popCurrentException();
							}
						}
						if (TMP2915.status != 0) reraiseException();
					}
					LA122: ;
				}
				LA120: ;
				nimln(108, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2923))) goto LA148;
					nimln(109, "nimbus.nim");
					{
						NIM_BOOL LOC152;
						NIM_BOOL LOC153;
						NimStringDesc* LOC156;
						NimStringDesc* LOC157;
						NimStringDesc* LOC160;
						NI LOC161;
						NimStringDesc* LOC162;
						LOC152 = 0;
						LOC153 = 0;
						LOC153 = (((NI) 4) <= (ircmsg ? (ircmsg->Sup.len-1) : -1));
						if (!(LOC153)) goto LA154;
						LOC153 = isloggedin_282144(nick);
						LA154: ;
						LOC152 = LOC153;
						if (!(LOC152)) goto LA155;
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC156 = 0;
						LOC156 = nsuToUpperStr(ircmsg->data[((NI) 4)]);
						LOC157 = 0;
						LOC157 = nsuToUpperStr(nick);
						LOC152 = !(eqStrings(LOC156, LOC157));
						LA155: ;
						if (!LOC152) goto LA158;
						nimln(110, "nimbus.nim");
						LOC160 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC161 = 0;
						LOC161 = upvote_282363(ircmsg->data[((NI) 4)]);
						LOC162 = 0;
						LOC162 = nimIntToStr(LOC161);
						LOC160 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + ircmsg->data[((NI) 4)]->Sup.len + LOC162->Sup.len + 55);
appendString(LOC160, ((NimStringDesc*) &TMP2889));
appendString(LOC160, ircmsg->data[((NI) 2)]);
appendString(LOC160, ((NimStringDesc*) &TMP2924));
appendString(LOC160, ircmsg->data[((NI) 4)]);
appendString(LOC160, ((NimStringDesc*) &TMP2925));
appendString(LOC160, LOC162);
appendString(LOC160, ((NimStringDesc*) &TMP2926));
						send_146407(sock_282125, LOC160);
					}
					goto LA150;
					LA158: ;
					{
						NimStringDesc* LOC164;
						nimln(112, "nimbus.nim");
						LOC164 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC164 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + 118);
appendString(LOC164, ((NimStringDesc*) &TMP2889));
appendString(LOC164, ircmsg->data[((NI) 2)]);
appendString(LOC164, ((NimStringDesc*) &TMP2927));
						send_146407(sock_282125, LOC164);
					}
					LA150: ;
				}
				LA148: ;
				nimln(115, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2928))) goto LA167;
					nimln(116, "nimbus.nim");
					{
						NIM_BOOL LOC171;
						NIM_BOOL LOC172;
						NimStringDesc* LOC175;
						NimStringDesc* LOC176;
						NimStringDesc* LOC179;
						NI LOC180;
						NimStringDesc* LOC181;
						LOC171 = 0;
						LOC172 = 0;
						LOC172 = (((NI) 4) <= (ircmsg ? (ircmsg->Sup.len-1) : -1));
						if (!(LOC172)) goto LA173;
						LOC172 = isloggedin_282144(nick);
						LA173: ;
						LOC171 = LOC172;
						if (!(LOC171)) goto LA174;
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC175 = 0;
						LOC175 = nsuToUpperStr(ircmsg->data[((NI) 4)]);
						LOC176 = 0;
						LOC176 = nsuToUpperStr(nick);
						LOC171 = !(eqStrings(LOC175, LOC176));
						LA174: ;
						if (!LOC171) goto LA177;
						nimln(117, "nimbus.nim");
						LOC179 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC180 = 0;
						LOC180 = downvote_282375(ircmsg->data[((NI) 4)]);
						LOC181 = 0;
						LOC181 = nimIntToStr(LOC180);
						LOC179 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + ircmsg->data[((NI) 4)]->Sup.len + LOC181->Sup.len + 57);
appendString(LOC179, ((NimStringDesc*) &TMP2889));
appendString(LOC179, ircmsg->data[((NI) 2)]);
appendString(LOC179, ((NimStringDesc*) &TMP2929));
appendString(LOC179, ircmsg->data[((NI) 4)]);
appendString(LOC179, ((NimStringDesc*) &TMP2925));
appendString(LOC179, LOC181);
appendString(LOC179, ((NimStringDesc*) &TMP2926));
						send_146407(sock_282125, LOC179);
					}
					goto LA169;
					LA177: ;
					{
						NimStringDesc* LOC183;
						nimln(119, "nimbus.nim");
						LOC183 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC183 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + 122);
appendString(LOC183, ((NimStringDesc*) &TMP2889));
appendString(LOC183, ircmsg->data[((NI) 2)]);
appendString(LOC183, ((NimStringDesc*) &TMP2930));
						send_146407(sock_282125, LOC183);
					}
					LA169: ;
				}
				LA167: ;
				nimln(122, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2931))) goto LA186;
					nimln(123, "nimbus.nim");
					{
						NIM_BOOL LOC190;
						NimStringDesc* LOC194;
						NI LOC195;
						NimStringDesc* LOC196;
						LOC190 = 0;
						LOC190 = (((NI) 4) <= (ircmsg ? (ircmsg->Sup.len-1) : -1));
						if (!(LOC190)) goto LA191;
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC190 = checkuser_282181(ircmsg->data[((NI) 4)]);
						LA191: ;
						if (!LOC190) goto LA192;
						nimln(124, "nimbus.nim");
						LOC194 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC195 = 0;
						LOC195 = karma_282387(ircmsg->data[((NI) 4)]);
						LOC196 = 0;
						LOC196 = nimIntToStr(LOC195);
						LOC194 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + ircmsg->data[((NI) 4)]->Sup.len + LOC196->Sup.len + 36);
appendString(LOC194, ((NimStringDesc*) &TMP2889));
appendString(LOC194, ircmsg->data[((NI) 2)]);
appendString(LOC194, ((NimStringDesc*) &TMP2890));
appendString(LOC194, ircmsg->data[((NI) 4)]);
appendString(LOC194, ((NimStringDesc*) &TMP2932));
appendString(LOC194, LOC196);
appendString(LOC194, ((NimStringDesc*) &TMP2926));
						send_146407(sock_282125, LOC194);
					}
					goto LA188;
					LA192: ;
					{
						NIM_BOOL LOC198;
						NimStringDesc* LOC201;
						NI LOC202;
						NimStringDesc* LOC203;
						nimln(125, "nimbus.nim");
						LOC198 = 0;
						LOC198 = checkuser_282181(nick);
						if (!LOC198) goto LA199;
						nimln(126, "nimbus.nim");
						LOC201 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC202 = 0;
						LOC202 = karma_282387(nick);
						LOC203 = 0;
						LOC203 = nimIntToStr(LOC202);
						LOC201 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + nick->Sup.len + LOC203->Sup.len + 36);
appendString(LOC201, ((NimStringDesc*) &TMP2889));
appendString(LOC201, ircmsg->data[((NI) 2)]);
appendString(LOC201, ((NimStringDesc*) &TMP2890));
appendString(LOC201, nick);
appendString(LOC201, ((NimStringDesc*) &TMP2932));
appendString(LOC201, LOC203);
appendString(LOC201, ((NimStringDesc*) &TMP2926));
						send_146407(sock_282125, LOC201);
					}
					goto LA188;
					LA199: ;
					LA188: ;
				}
				LA186: ;
				nimln(129, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2933))) goto LA206;
					nimln(130, "nimbus.nim");
					{
						NIM_BOOL LOC210;
						NIM_BOOL LOC211;
						NimStringDesc* LOC216;
						NimStringDesc* LOC217;
						LOC210 = 0;
						LOC211 = 0;
						LOC211 = (((NI) 4) <= (ircmsg ? (ircmsg->Sup.len-1) : -1));
						if (!(LOC211)) goto LA212;
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC211 = isloggedin_282144(ircmsg->data[((NI) 4)]);
						LA212: ;
						LOC210 = LOC211;
						if (!(LOC210)) goto LA213;
						LOC210 = isloggedin_282144(nick);
						LA213: ;
						if (!LOC210) goto LA214;
						nimln(131, "nimbus.nim");
						LOC216 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC217 = 0;
						LOC217 = battleusers_282555(nick, ircmsg->data[((NI) 4)]);
						LOC216 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + LOC217->Sup.len + 13);
appendString(LOC216, ((NimStringDesc*) &TMP2889));
appendString(LOC216, ircmsg->data[((NI) 2)]);
appendString(LOC216, ((NimStringDesc*) &TMP2890));
appendString(LOC216, LOC217);
appendString(LOC216, ((NimStringDesc*) &TMP2782));
						send_146407(sock_282125, LOC216);
					}
					LA214: ;
				}
				LA206: ;
				nimln(134, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2934))) goto LA220;
					nimln(135, "nimbus.nim");
					{
						NIM_BOOL LOC224;
						NimStringDesc* LOC228;
						NI LOC229;
						NimStringDesc* LOC230;
						LOC224 = 0;
						LOC224 = (((NI) 4) <= (ircmsg ? (ircmsg->Sup.len-1) : -1));
						if (!(LOC224)) goto LA225;
						LOC224 = isloggedin_282144(nick);
						LA225: ;
						if (!LOC224) goto LA226;
						nimln(136, "nimbus.nim");
						LOC228 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC229 = 0;
						LOC229 = nsuParseInt(ircmsg->data[((NI) 4)]);
						LOC230 = 0;
						LOC230 = getitemname_282532(LOC229);
						LOC228 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + LOC230->Sup.len + 34);
appendString(LOC228, ((NimStringDesc*) &TMP2889));
appendString(LOC228, ircmsg->data[((NI) 2)]);
appendString(LOC228, ((NimStringDesc*) &TMP2935));
appendString(LOC228, LOC230);
appendString(LOC228, ((NimStringDesc*) &TMP2936));
						send_146407(sock_282125, LOC228);
					}
					LA226: ;
				}
				LA220: ;
				nimln(139, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2937))) goto LA233;
					nimln(140, "nimbus.nim");
					{
						NimStringDesc* LOC239;
						if (!((ircmsg ? (ircmsg->Sup.len-1) : -1) < ((NI) 4))) goto LA237;
						nimln(141, "nimbus.nim");
						LOC239 = 0;
						LOC239 = rawNewString(nick->Sup.len + 39);
appendString(LOC239, ((NimStringDesc*) &TMP2889));
appendString(LOC239, nick);
appendString(LOC239, ((NimStringDesc*) &TMP2938));
						send_146407(sock_282125, LOC239);
					}
					goto LA235;
					LA237: ;
					{
						nimln(143, "nimbus.nim");
						{
							NIM_BOOL LOC243;
							NimStringDesc* LOC246;
							NimStringDesc* LOC247;
							if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
							LOC243 = 0;
							LOC243 = loginuser_282244(nick, ircmsg->data[((NI) 4)]);
							if (!LOC243) goto LA244;
							nimln(144, "nimbus.nim");
							loggedin_282102 = (TY13606*) incrSeq(&(loggedin_282102)->Sup, sizeof(NimStringDesc*));
							LOC246 = 0;
							LOC246 = loggedin_282102->data[loggedin_282102->Sup.len-1]; loggedin_282102->data[loggedin_282102->Sup.len-1] = copyStringRC1(nick);
							if (LOC246) nimGCunrefNoCycle(LOC246);
							nimln(145, "nimbus.nim");
							LOC247 = 0;
							LOC247 = rawNewString(nick->Sup.len + 47);
appendString(LOC247, ((NimStringDesc*) &TMP2889));
appendString(LOC247, nick);
appendString(LOC247, ((NimStringDesc*) &TMP2939));
							send_146407(sock_282125, LOC247);
						}
						goto LA241;
						LA244: ;
						{
							NimStringDesc* LOC249;
							nimln(147, "nimbus.nim");
							LOC249 = 0;
							LOC249 = rawNewString(nick->Sup.len + 32);
appendString(LOC249, ((NimStringDesc*) &TMP2889));
appendString(LOC249, nick);
appendString(LOC249, ((NimStringDesc*) &TMP2940));
							send_146407(sock_282125, LOC249);
						}
						LA241: ;
					}
					LA235: ;
				}
				LA233: ;
				nimln(150, "nimbus.nim");
				{
					NimStringDesc* LOC254;
					NIM_BOOL LOC255;
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2941))) goto LA252;
					nimln(151, "nimbus.nim");
					LOC254 = 0;
					LOC254 = rawNewString(nick->Sup.len + 48);
appendString(LOC254, ((NimStringDesc*) &TMP2889));
appendString(LOC254, nick);
appendString(LOC254, ((NimStringDesc*) &TMP2942));
					send_146407(sock_282125, LOC254);
					nimln(152, "nimbus.nim");
					LOC255 = 0;
					LOC255 = logoutuser_282255(nick);
				}
				LA252: ;
				nimln(155, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2943))) goto LA258;
					nimln(156, "nimbus.nim");
					{
						if (!((ircmsg ? (ircmsg->Sup.len-1) : -1) == ((NI) 4))) goto LA262;
						nimln(157, "nimbus.nim");
						{
							NI LOC266;
							NimStringDesc* LOC269;
							TY167666 LOC270;
							NI LOC271;
							NimStringDesc* LOC272;
							if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
							LOC266 = 0;
							LOC266 = adduser_282223(nick, ircmsg->data[((NI) 4)]);
							if (!(((NI) 0) < LOC266)) goto LA267;
							nimln(158, "nimbus.nim");
							LOC269 = 0;
							LOC269 = sql_167021(((NimStringDesc*) &TMP2944));
							memset((void*)LOC270, 0, sizeof(LOC270));
							nimln(159, "nimbus.nim");
							LOC271 = 0;
							LOC271 = userid_282396(nick);
							LOC270[0] = nimIntToStr(LOC271);
							exec_167155(db_282127, LOC269, LOC270, 1);
							nimln(161, "nimbus.nim");
							LOC272 = 0;
							if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
							LOC272 = rawNewString(nick->Sup.len + ircmsg->data[((NI) 4)]->Sup.len + 28);
appendString(LOC272, ((NimStringDesc*) &TMP2889));
appendString(LOC272, nick);
appendString(LOC272, ((NimStringDesc*) &TMP2945));
appendString(LOC272, ircmsg->data[((NI) 4)]);
appendString(LOC272, ((NimStringDesc*) &TMP2946));
							send_146407(sock_282125, LOC272);
						}
						goto LA264;
						LA267: ;
						{
							NimStringDesc* LOC274;
							nimln(163, "nimbus.nim");
							LOC274 = 0;
							LOC274 = rawNewString(nick->Sup.len + 33);
appendString(LOC274, ((NimStringDesc*) &TMP2889));
appendString(LOC274, nick);
appendString(LOC274, ((NimStringDesc*) &TMP2947));
							send_146407(sock_282125, LOC274);
						}
						LA264: ;
					}
					goto LA260;
					LA262: ;
					{
						NI pass;
						nimln(165, "nimbus.nim");
						pass = randomint_279271(((NI) 10000), ((NI) 99999));
						nimln(166, "nimbus.nim");
						{
							NimStringDesc* LOC278;
							NI LOC279;
							NimStringDesc* LOC282;
							NimStringDesc* LOC283;
							LOC278 = 0;
							LOC278 = nimIntToStr(pass);
							LOC279 = 0;
							LOC279 = adduser_282223(nick, LOC278);
							if (!(((NI) 0) < LOC279)) goto LA280;
							nimln(167, "nimbus.nim");
							LOC282 = 0;
							LOC283 = 0;
							LOC283 = nimIntToStr(pass);
							LOC282 = rawNewString(nick->Sup.len + LOC283->Sup.len + 47);
appendString(LOC282, ((NimStringDesc*) &TMP2889));
appendString(LOC282, nick);
appendString(LOC282, ((NimStringDesc*) &TMP2948));
appendString(LOC282, LOC283);
appendString(LOC282, ((NimStringDesc*) &TMP2946));
							send_146407(sock_282125, LOC282);
						}
						goto LA276;
						LA280: ;
						{
							NimStringDesc* LOC285;
							nimln(169, "nimbus.nim");
							LOC285 = 0;
							LOC285 = rawNewString(nick->Sup.len + 33);
appendString(LOC285, ((NimStringDesc*) &TMP2889));
appendString(LOC285, nick);
appendString(LOC285, ((NimStringDesc*) &TMP2947));
							send_146407(sock_282125, LOC285);
						}
						LA276: ;
					}
					LA260: ;
				}
				LA258: ;
				nimln(172, "nimbus.nim");
				{
					NimStringDesc* LOC290;
					NimStringDesc* LOC291;
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2949))) goto LA288;
					nimln(173, "nimbus.nim");
					LOC290 = 0;
					if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					LOC290 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + 85);
appendString(LOC290, ((NimStringDesc*) &TMP2889));
appendString(LOC290, ircmsg->data[((NI) 2)]);
appendString(LOC290, ((NimStringDesc*) &TMP2950));
					send_146407(sock_282125, LOC290);
					nimln(174, "nimbus.nim");
					LOC291 = 0;
					if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					LOC291 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + 59);
appendString(LOC291, ((NimStringDesc*) &TMP2889));
appendString(LOC291, ircmsg->data[((NI) 2)]);
appendString(LOC291, ((NimStringDesc*) &TMP2951));
					send_146407(sock_282125, LOC291);
				}
				LA288: ;
				nimln(177, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2952))) goto LA294;
					nimln(178, "nimbus.nim");
					{
						TSafePoint TMP2953;
						if (!(((NI) 4) <= (ircmsg ? (ircmsg->Sup.len-1) : -1))) goto LA298;
						nimln(179, "nimbus.nim");
						pushSafePoint(&TMP2953);
						TMP2953.status = setjmp(TMP2953.context);
						if (TMP2953.status == 0) {
							NimStringDesc* LOC301;
							NI LOC302;
							NimStringDesc* LOC303;
							nimln(180, "nimbus.nim");
							LOC301 = 0;
							if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
							if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
							LOC302 = 0;
							LOC302 = nsuParseInt(ircmsg->data[((NI) 4)]);
							LOC303 = 0;
							LOC303 = getquote_282203(LOC302);
							LOC301 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + LOC303->Sup.len + 13);
appendString(LOC301, ((NimStringDesc*) &TMP2889));
appendString(LOC301, ircmsg->data[((NI) 2)]);
appendString(LOC301, ((NimStringDesc*) &TMP2890));
appendString(LOC301, LOC303);
appendString(LOC301, ((NimStringDesc*) &TMP2782));
							send_146407(sock_282125, LOC301);
							popSafePoint();
						}
						else {
							popSafePoint();
							setFrame((TFrame*)&FR);
							{
								NimStringDesc* LOC306;
								TMP2953.status = 0;
								nimln(182, "nimbus.nim");
								LOC306 = 0;
								if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
								LOC306 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + 31);
appendString(LOC306, ((NimStringDesc*) &TMP2889));
appendString(LOC306, ircmsg->data[((NI) 2)]);
appendString(LOC306, ((NimStringDesc*) &TMP2954));
								send_146407(sock_282125, LOC306);
								popCurrentException();
							}
						}
						if (TMP2953.status != 0) reraiseException();
					}
					goto LA296;
					LA298: ;
					{
						NimStringDesc* LOC308;
						NI LOC309;
						NI TMP2955;
						NI LOC310;
						NimStringDesc* LOC311;
						nimln(184, "nimbus.nim");
						LOC308 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC309 = 0;
						LOC309 = getquotecount_282234();
						TMP2955 = addInt(LOC309, ((NI) 1));
						LOC310 = 0;
						LOC310 = randomint_279271(((NI) 1), (NI)(TMP2955));
						LOC311 = 0;
						LOC311 = getquote_282203(LOC310);
						LOC308 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + LOC311->Sup.len + 13);
appendString(LOC308, ((NimStringDesc*) &TMP2889));
appendString(LOC308, ircmsg->data[((NI) 2)]);
appendString(LOC308, ((NimStringDesc*) &TMP2890));
appendString(LOC308, LOC311);
appendString(LOC308, ((NimStringDesc*) &TMP2782));
						send_146407(sock_282125, LOC308);
					}
					LA296: ;
				}
				LA294: ;
				nimln(187, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2956))) goto LA314;
					nimln(188, "nimbus.nim");
					{
						NI id;
						Slice88061 LOC320;
						TY13606* LOC321;
						NimStringDesc* LOC322;
						NimStringDesc* LOC323;
						NimStringDesc* LOC324;
						if (!(((NI) 4) <= (ircmsg ? (ircmsg->Sup.len-1) : -1))) goto LA318;
						nimln(189, "nimbus.nim");
						LOC320 = HEX2EHEX2E_110273(((NI) 4), (ircmsg ? (ircmsg->Sup.len-1) : -1));
						LOC321 = 0;
						LOC321 = HEX5BHEX5D_133598(ircmsg, LOC320);
						LOC322 = 0;
						LOC322 = nsuJoinSep(LOC321->data, LOC321->Sup.len, ((NimStringDesc*) &TMP2784));
						id = addquote_282213(LOC322);
						nimln(190, "nimbus.nim");
						LOC323 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC324 = 0;
						LOC324 = nimIntToStr(id);
						LOC323 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + LOC324->Sup.len + 27);
appendString(LOC323, ((NimStringDesc*) &TMP2889));
appendString(LOC323, ircmsg->data[((NI) 2)]);
appendString(LOC323, ((NimStringDesc*) &TMP2957));
appendString(LOC323, LOC324);
appendString(LOC323, ((NimStringDesc*) &TMP2958));
						send_146407(sock_282125, LOC323);
					}
					goto LA316;
					LA318: ;
					{
						NimStringDesc* LOC326;
						nimln(192, "nimbus.nim");
						LOC326 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC326 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + 34);
appendString(LOC326, ((NimStringDesc*) &TMP2889));
appendString(LOC326, ircmsg->data[((NI) 2)]);
appendString(LOC326, ((NimStringDesc*) &TMP2959));
						send_146407(sock_282125, LOC326);
					}
					LA316: ;
				}
				LA314: ;
				nimln(195, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2960))) goto LA329;
					nimln(196, "nimbus.nim");
					{
						NIM_BOOL LOC333;
						NIM_BOOL LOC334;
						NimStringDesc* LOC337;
						NimStringDesc* LOC340;
						Slice88061 LOC341;
						TY13606* LOC342;
						NimStringDesc* LOC343;
						NimStringDesc* LOC344;
						TY161637 LOC345;
						NIM_BOOL LOC346;
						NimStringDesc* LOC347;
						LOC333 = 0;
						LOC334 = 0;
						LOC334 = (((NI) 4) <= (ircmsg ? (ircmsg->Sup.len-1) : -1));
						if (!(LOC334)) goto LA335;
						LOC334 = isloggedin_282144(((NimStringDesc*) &TMP2892));
						LA335: ;
						LOC333 = LOC334;
						if (!(LOC333)) goto LA336;
						LOC337 = 0;
						LOC337 = nsuToLowerStr(nick);
						LOC333 = eqStrings(LOC337, ((NimStringDesc*) &TMP2893));
						LA336: ;
						if (!LOC333) goto LA338;
						nimln(197, "nimbus.nim");
						LOC340 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC341 = HEX2EHEX2E_110273(((NI) 4), (ircmsg ? (ircmsg->Sup.len-1) : -1));
						LOC342 = 0;
						LOC342 = HEX5BHEX5D_133598(ircmsg, LOC341);
						LOC343 = 0;
						LOC343 = nsuJoinSep(LOC342->data, LOC342->Sup.len, ((NimStringDesc*) &TMP2784));
						LOC344 = 0;
						LOC344 = sql_167021(LOC343);
						memset((void*)LOC345, 0, sizeof(LOC345));
						LOC346 = 0;
						LOC346 = tryexec_167138(db_282127, LOC344, LOC345, 0);
						LOC347 = 0;
						LOC347 = nimBoolToStr(LOC346);
						LOC340 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + LOC347->Sup.len + 21);
appendString(LOC340, ((NimStringDesc*) &TMP2889));
appendString(LOC340, ircmsg->data[((NI) 2)]);
appendString(LOC340, ((NimStringDesc*) &TMP2961));
appendString(LOC340, LOC347);
appendString(LOC340, ((NimStringDesc*) &TMP2782));
						send_146407(sock_282125, LOC340);
					}
					LA338: ;
				}
				LA329: ;
				nimln(200, "nimbus.nim");
				{
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					if (!eqStrings(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2962))) goto LA350;
					nimln(201, "nimbus.nim");
					{
						NIM_BOOL LOC354;
						NIM_BOOL LOC355;
						NimStringDesc* LOC358;
						NimStringDesc* LOC361;
						NimStringDesc* LOC362;
						TY167666 LOC363;
						NI64 LOC364;
						NimStringDesc* LOC365;
						LOC354 = 0;
						LOC355 = 0;
						LOC355 = (((NI) 4) <= (ircmsg ? (ircmsg->Sup.len-1) : -1));
						if (!(LOC355)) goto LA356;
						LOC355 = isloggedin_282144(((NimStringDesc*) &TMP2892));
						LA356: ;
						LOC354 = LOC355;
						if (!(LOC354)) goto LA357;
						LOC358 = 0;
						LOC358 = nsuToLowerStr(nick);
						LOC354 = eqStrings(LOC358, ((NimStringDesc*) &TMP2893));
						LA357: ;
						if (!LOC354) goto LA359;
						nimln(202, "nimbus.nim");
						LOC361 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC362 = 0;
						LOC362 = sql_167021(((NimStringDesc*) &TMP2963));
						memset((void*)LOC363, 0, sizeof(LOC363));
						if ((NU)(((NI) 4)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC363[0] = copyString(ircmsg->data[((NI) 4)]);
						LOC364 = 0;
						LOC364 = tryinsertid_167593(db_282127, LOC362, LOC363, 1);
						LOC365 = 0;
						LOC365 = nimIntToStr(((NI) (LOC364)));
						LOC361 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + LOC365->Sup.len + 21);
appendString(LOC361, ((NimStringDesc*) &TMP2889));
appendString(LOC361, ircmsg->data[((NI) 2)]);
appendString(LOC361, ((NimStringDesc*) &TMP2961));
appendString(LOC361, LOC365);
appendString(LOC361, ((NimStringDesc*) &TMP2782));
						send_146407(sock_282125, LOC361);
					}
					LA359: ;
				}
				LA350: ;
				nimln(213, "nimbus.nim");
				{
					NIM_BOOL LOC368;
					NimStringDesc* volatile linktitle;
					TSafePoint TMP2966;
					LOC368 = 0;
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					LOC368 = nsuStartsWith(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2964));
					if (LOC368) goto LA369;
					if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					LOC368 = nsuStartsWith(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2965));
					LA369: ;
					if (!LOC368) goto LA370;
					linktitle = 0;
					nimln(215, "nimbus.nim");
					pushSafePoint(&TMP2966);
					TMP2966.status = setjmp(TMP2966.context);
					if (TMP2966.status == 0) {
						TY13606* LOC373;
						TY13606* LOC374;
						NimStringDesc* LOC375;
						nimln(216, "nimbus.nim");
						if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						nsuDelete((&ircmsg->data[((NI) 3)]), ((NI) 0), ((NI) 0));
						nimln(217, "nimbus.nim");
						if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						printf("%s\015\012", ircmsg->data[((NI) 3)]? (ircmsg->data[((NI) 3)])->data:"nil");
						nimln(218, "nimbus.nim");
						if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						linktitle = getcontent_266171(ircmsg->data[((NI) 3)], ((NimStringDesc*) &TMP2762), ((NI) 5), defaultsslcontext_265377, ((NI) -1), ((NimStringDesc*) &TMP2972), NIM_NIL);
						nimln(219, "nimbus.nim");
						printf("%s\015\012", ((NimStringDesc*) &TMP2973)? (((NimStringDesc*) &TMP2973))->data:"nil");
						nimln(220, "nimbus.nim");
						LOC373 = 0;
						LOC373 = nsuSplitString(linktitle, ((NimStringDesc*) &TMP2974));
						if ((NU)(((NI) 1)) >= (NU)(LOC373->Sup.len)) raiseIndexError();
						linktitle = copyString(LOC373->data[((NI) 1)]);
						nimln(221, "nimbus.nim");
						printf("%s\015\012", ((NimStringDesc*) &TMP2975)? (((NimStringDesc*) &TMP2975))->data:"nil");
						nimln(222, "nimbus.nim");
						LOC374 = 0;
						LOC374 = nsuSplitString(linktitle, ((NimStringDesc*) &TMP2976));
						if ((NU)(((NI) 0)) >= (NU)(LOC374->Sup.len)) raiseIndexError();
						linktitle = copyString(LOC374->data[((NI) 0)]);
						nimln(223, "nimbus.nim");
						printf("%s\015\012", linktitle? (linktitle)->data:"nil");
						nimln(224, "nimbus.nim");
						LOC375 = 0;
						if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						if ((NU)(((NI) 3)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
						LOC375 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + linktitle->Sup.len + ircmsg->data[((NI) 3)]->Sup.len + 30);
appendString(LOC375, ((NimStringDesc*) &TMP2889));
appendString(LOC375, ircmsg->data[((NI) 2)]);
appendString(LOC375, ((NimStringDesc*) &TMP2890));
appendString(LOC375, linktitle);
appendString(LOC375, ((NimStringDesc*) &TMP2977));
appendString(LOC375, ircmsg->data[((NI) 3)]);
appendString(LOC375, ((NimStringDesc*) &TMP2978));
						send_146407(sock_282125, LOC375);
						popSafePoint();
					}
					else {
						popSafePoint();
						setFrame((TFrame*)&FR);
						{
							TMP2966.status = 0;
							nimln(226, "nimbus.nim");
							linktitle = copyString(((NimStringDesc*) &TMP2979));
							nimln(227, "nimbus.nim");
							printf("%s\015\012", ((NimStringDesc*) &TMP2980)? (((NimStringDesc*) &TMP2980))->data:"nil");
							popCurrentException();
						}
					}
					if (TMP2966.status != 0) reraiseException();
				}
				LA370: ;
				nimln(230, "nimbus.nim");
				{
					NIM_BOOL LOC380;
					NIM_BOOL LOC381;
					Slice88061 LOC382;
					TY13606* LOC383;
					NimStringDesc* LOC384;
					Slice88061 LOC386;
					TY13606* LOC387;
					NimStringDesc* LOC388;
					Slice88061 LOC390;
					TY13606* LOC391;
					NimStringDesc* LOC392;
					NimStringDesc* LOC395;
					NimStringDesc* LOC396;
					LOC380 = 0;
					LOC381 = 0;
					LOC382 = HEX2EHEX2E_110273(((NI) 3), (ircmsg ? (ircmsg->Sup.len-1) : -1));
					LOC383 = 0;
					LOC383 = HEX5BHEX5D_133598(ircmsg, LOC382);
					LOC384 = 0;
					LOC384 = nsuJoinSep(LOC383->data, LOC383->Sup.len, ((NimStringDesc*) &TMP2784));
					LOC381 = contains_101362(LOC384, ((NimStringDesc*) &TMP2981));
					if (LOC381) goto LA385;
					LOC386 = HEX2EHEX2E_110273(((NI) 3), (ircmsg ? (ircmsg->Sup.len-1) : -1));
					LOC387 = 0;
					LOC387 = HEX5BHEX5D_133598(ircmsg, LOC386);
					LOC388 = 0;
					LOC388 = nsuJoinSep(LOC387->data, LOC387->Sup.len, ((NimStringDesc*) &TMP2784));
					LOC381 = contains_101362(LOC388, ((NimStringDesc*) &TMP2982));
					LA385: ;
					LOC380 = LOC381;
					if (LOC380) goto LA389;
					LOC390 = HEX2EHEX2E_110273(((NI) 3), (ircmsg ? (ircmsg->Sup.len-1) : -1));
					LOC391 = 0;
					LOC391 = HEX5BHEX5D_133598(ircmsg, LOC390);
					LOC392 = 0;
					LOC392 = nsuJoinSep(LOC391->data, LOC391->Sup.len, ((NimStringDesc*) &TMP2784));
					LOC380 = contains_101362(LOC392, ((NimStringDesc*) &TMP2983));
					LA389: ;
					if (!LOC380) goto LA393;
					nimln(231, "nimbus.nim");
					LOC395 = 0;
					if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					LOC395 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + 17);
appendString(LOC395, ((NimStringDesc*) &TMP2889));
appendString(LOC395, ircmsg->data[((NI) 2)]);
appendString(LOC395, ((NimStringDesc*) &TMP2984));
					send_146407(sock_282125, LOC395);
					nimln(232, "nimbus.nim");
					LOC396 = 0;
					if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
					LOC396 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + 20);
appendString(LOC396, ((NimStringDesc*) &TMP2889));
appendString(LOC396, ircmsg->data[((NI) 2)]);
appendString(LOC396, ((NimStringDesc*) &TMP2985));
					send_146407(sock_282125, LOC396);
				}
				goto LA378;
				LA393: ;
				{
					nimln(235, "nimbus.nim");
					{
						Slice88061 LOC400;
						TY13606* LOC401;
						NimStringDesc* LOC402;
						NIM_BOOL LOC403;
						LOC400 = HEX2EHEX2E_110273(((NI) 3), (ircmsg ? (ircmsg->Sup.len-1) : -1));
						LOC401 = 0;
						LOC401 = HEX5BHEX5D_133598(ircmsg, LOC400);
						LOC402 = 0;
						LOC402 = nsuJoinSep(LOC401->data, LOC401->Sup.len, ((NimStringDesc*) &TMP2784));
						LOC403 = 0;
						LOC403 = doesusergetdrop_282673(LOC402, nick);
						if (!LOC403) goto LA404;
						nimln(236, "nimbus.nim");
						{
							NIM_BOOL LOC408;
							NI itemid;
							LOC408 = 0;
							LOC408 = isloggedin_282144(nick);
							if (!LOC408) goto LA409;
							nimln(237, "nimbus.nim");
							itemid = generatelootdrop_282706(nick, NIM_FALSE);
							nimln(238, "nimbus.nim");
							{
								NI LOC413;
								NIM_BOOL LOC414;
								NimStringDesc* LOC417;
								NimStringDesc* LOC418;
								LOC413 = 0;
								LOC413 = userid_282396(nick);
								LOC414 = 0;
								LOC414 = adduserloot_282768(LOC413, itemid);
								if (!LOC414) goto LA415;
								nimln(239, "nimbus.nim");
								LOC417 = 0;
								if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
								LOC418 = 0;
								LOC418 = getitemname_282532(itemid);
								LOC417 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + nick->Sup.len + LOC418->Sup.len + 42);
appendString(LOC417, ((NimStringDesc*) &TMP2889));
appendString(LOC417, ircmsg->data[((NI) 2)]);
appendString(LOC417, ((NimStringDesc*) &TMP2890));
appendString(LOC417, nick);
appendString(LOC417, ((NimStringDesc*) &TMP2986));
appendString(LOC417, LOC418);
appendString(LOC417, ((NimStringDesc*) &TMP2987));
								send_146407(sock_282125, LOC417);
							}
							LA415: ;
						}
						goto LA406;
						LA409: ;
						{
							NimStringDesc* LOC420;
							nimln(241, "nimbus.nim");
							LOC420 = 0;
							if ((NU)(((NI) 2)) >= (NU)(ircmsg->Sup.len)) raiseIndexError();
							LOC420 = rawNewString(ircmsg->data[((NI) 2)]->Sup.len + nick->Sup.len + 72);
appendString(LOC420, ((NimStringDesc*) &TMP2889));
appendString(LOC420, ircmsg->data[((NI) 2)]);
appendString(LOC420, ((NimStringDesc*) &TMP2890));
appendString(LOC420, nick);
appendString(LOC420, ((NimStringDesc*) &TMP2988));
							send_146407(sock_282125, LOC420);
						}
						LA406: ;
					}
					LA404: ;
				}
				LA378: ;
			}
			goto LA55;
			LA70: ;
			LA55: ;
		}
	} LA39: ;
	nimln(247, "nimbus.nim");
	fclose(log_282122);
	nimln(248, "nimbus.nim");
	close_140462(sock_282125);
	popFrame();
}

NIM_EXTERNC N_NOINLINE(void, nimbusDatInit)(void) {
}

